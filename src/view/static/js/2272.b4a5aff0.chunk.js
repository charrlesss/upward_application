"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[2272],{89767:function(e,n,t){var o=t(93433),i=t(1413),r=t(29439),a=t(72791),c=t(57482),l=t(64554),u=t(56214),s=t(29961),d=t(54277),f=t(70169),h=t(6484),p=t(16088),v=t(80184),x=(0,a.createContext)({rows:[],rowSelectionModel:[],footerChildren:function(){return(0,v.jsx)("div",{})},footerPaginationPosition:"right-left",showFooterSelectedCount:!0}),m=(0,a.forwardRef)((function(e,n){var t=e.isLoading,l=e.columns,s=e.rows,d=e.table_id,f=e.isSingleSelection,h=e.isRowFreeze,p=e.dataSelection,m=e.CustomFooterComponent,g=void 0===m?C:m,w=e.isRowSelectable,k=e.getCellClassName,b=e.checkboxSelection,Z=void 0===b||b,y=e.footerChildren,S=void 0===y?function(e,n){return(0,v.jsx)("div",{})}:y,B=e.footerPaginationPosition,D=void 0===B?"right-left":B,j=e.showFooterSelectedCount,M=void 0===j||j,I=(0,a.useState)([]),z=(0,r.Z)(I,2),N=z[0],A=z[1];function F(e,n,t){p&&p(e,n,t)}(0,a.useImperativeHandle)(n,(function(){return{removeSelection:function(){A([])},getSelectedRows:function(){return s.filter((function(e){return null===N||void 0===N?void 0:N.includes(e[d])}))},setSelectedRows:function(e){A(e)}}}));var _=[];return(0,v.jsx)(x.Provider,{value:{showFooterSelectedCount:M,footerPaginationPosition:D,rowSelectionModel:N,rows:s,footerChildren:S},children:(0,v.jsx)(u._$,{slots:{loadingOverlay:c.Z,footer:g},initialState:{pagination:{paginationModel:{pageSize:35}}},loading:t,getRowId:function(e){return e[d]},columns:l.filter((function(e){return!e.hide})),rows:s,showCellVerticalBorder:!0,showColumnVerticalBorder:!0,checkboxSelection:Z,rowSelectionModel:N,rowHeight:25,columnHeaderHeight:35,pageSizeOptions:[10,20,35,50,75,100],sx:(0,i.Z)((0,i.Z)({"& .cash":{color:"#ec4899"},"& .check":{color:"#0891b2"},"& .approved":{color:"green"},"& .pending":{color:"orange"},"& .disapproved":{color:"red"},"& .normal":{color:"red"},"& .MuiDataGrid-row.Mui-selected:hover":{color:"black","& .MuiSvgIcon-root ":{fill:"#3b82f6"}},"& .hover-keyboard":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row:hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row.hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiTablePagination-root p ":{padding:"0 !important"}},{"& .MuiDataGrid-columnHeaders":{background:"#64748b",color:"white",fontSize:"14px"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer .MuiSvgIcon-root ":{display:f||h?"none":"block",fill:"white"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer input ":{display:f||h?"none":"block"}}),{fontSize:13,fontWeight:500,"& .MuiDataGrid-checkboxInput":{height:"27px",width:"27px"},"& .MuiDataGrid-checkboxInput svg":{height:"20px",width:"20px"}}),onRowSelectionModelChange:function(e){if(h){if(e.length<=0)return;if(_=e,N.includes(_[_.length-1]))return;return A(e),void F([e[e.length-1]],s,null)}if(!h&&f)if(N&&(null===N||void 0===N?void 0:N.length)>0){var n=new Set(N);A(e.filter((function(e){return!n.has(e)})))}else A(e);else A(e);F([e[e.length-1]],s,null)},onCellKeyDown:function(e,n){if(["NumpadEnter","Enter","Delete","Backspace"].includes(n.code))return n.preventDefault(),"Enter"===n.code||"NumpadEnter"===n.code?f&&!h?A((function(t){return t&&t.length>0&&t[0]===e.rowNode.id?(F([],s,n.code),[]):(F([e.rowNode.id],s,n.code),[e.rowNode.id])})):void A((function(t){return t&&!h&&t.length>0&&t.includes(e.rowNode.id)?(t=t.filter((function(n){return n!==e.rowNode.id})),F([],s,n.code),t):t&&h&&t.length>0&&t.includes(e.rowNode.id)?t:(F([e.rowNode.id],s,n.code),[].concat((0,o.Z)(t),[e.rowNode.id]))})):"Delete"===n.code||"Backspace"===n.code?(A([e.rowNode.id]),F([e.rowNode.id],s,n.code)):void 0},disableVirtualization:!0,isRowSelectable:w,getCellClassName:k})})}));function g(e){var n=e.page,t=e.onPageChange,o=e.className,i=(0,s.l)(),r=(0,d.P)(i,f.UB);return(0,v.jsx)(p.Z,{variant:"outlined",color:"primary",className:o,count:r,page:n+1,onChange:function(e,n){t(e,n-1)}})}function w(e){return(0,v.jsx)(h.x,(0,i.Z)({ActionsComponent:g},e))}function C(e){var n=(0,a.useContext)(x),t=n.rowSelectionModel,o=n.showFooterSelectedCount,r=n.footerPaginationPosition,c=n.footerChildren,u=n.rows;return(0,v.jsxs)(l.Z,{sx:{columnGap:"50px",display:"flex",width:"100%",justifyContent:"space-between",px:3,alignItems:"center",flexDirection:"right-left"===r?"row-reverse":"row"},children:[(0,v.jsx)(w,(0,i.Z)({},e)),(0,v.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"right-left"===r?"flex-start":"flex-end",flex:1,alignItems:"center"},children:[o&&(0,v.jsxs)("div",{children:["Selected:",null===t||void 0===t?void 0:t.length]}),(0,v.jsx)("div",{children:c(t,u)})]})]})}n.Z=m},42272:function(e,n,t){t.r(n),t.d(n,{bankColumn:function(){return I},default:function(){return N},reducer:function(){return M},setNewStateValue:function(){return A}});var o=t(74165),i=t(15861),r=t(29439),a=t(4942),c=t(1413),l=t(72791),u=t(64554),s=t(48550),d=t(36151),f=t(42419),h=t(27247),p=t(4378),v=t(3380),x=t(91933),m=t(21830),g=t.n(m),w=t(79018),C=t(29823),k=t(53329),b=t(94454),Z=t(85523),y=t(39709),S=t(89767),B=t(64230),D=t(80184),j={Bank_Code:"",Bank:"",Inactive:!1,search:"",mode:""},M=function(e,n){return"UPDATE_FIELD"===n.type?(0,c.Z)((0,c.Z)({},e),{},(0,a.Z)({},n.field,n.value)):e},I=[{field:"Bank_Code",headerName:"Bank Code",flex:1},{field:"Bank",headerName:"Bank",flex:1},{field:"Inactive",headerName:"Active",flex:1}],z="bank";function N(){var e,n,t,m,N,F=(0,l.useRef)(null),_=(0,l.useReducer)(M,j),L=(0,r.Z)(_,2),P=L[0],E=L[1],T=(0,l.useContext)(v.V),G=T.myAxios,R=T.user,H=(0,l.useState)([]),V=(0,r.Z)(H,2),U=V[0],q=V[1],K=(0,l.useRef)(null),O=(0,x.useQueryClient)(),Q=(0,x.useQuery)({queryKey:z,queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.get("/reference/get-banks?bankSearch=".concat(P.search),{headers:{Authorization:"Bearer ".concat(null===R||void 0===R?void 0:R.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){q(null===e||void 0===e?void 0:e.data.bank)}}),W=Q.isLoading,Y=Q.refetch,X=(0,x.useMutation)({mutationKey:z,mutationFn:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.post("/reference/add-bank",n,{headers:{Authorization:"Bearer ".concat(null===R||void 0===R?void 0:R.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ue}),$=X.mutate,J=X.isLoading,ee=(0,x.useMutation)({mutationKey:z,mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.post("/reference/update-bank",n,{headers:{Authorization:"Bearer ".concat(null===R||void 0===R?void 0:R.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ue}),ne=ee.mutate,te=ee.isLoading,oe=(0,x.useMutation)({mutationKey:z,mutationFn:function(e){return(m=m||(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.post("/reference/delete-bank",n,{headers:{Authorization:"Bearer ".concat(null===R||void 0===R?void 0:R.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ue}),ie=oe.mutate,re=oe.isLoading,ae=function(e){var n=e.target,t=n.name,o=n.value;E({type:"UPDATE_FIELD",field:t,value:o})};function ce(e){return e.preventDefault(),""===P.Bank_Code?g().fire({position:"center",icon:"warning",title:"Bank Code is Required",showConfirmButton:!1,timer:1500}):""===P.Bank?g().fire({position:"center",icon:"warning",title:"Bank is Required",showConfirmButton:!1,timer:1500}):P.Bank_Code.length>=10?g().fire({position:"center",icon:"warning",title:"Invalid bank code is too long",showConfirmButton:!1,timer:1500}):P.Bank.length>=50?g().fire({position:"center",icon:"warning",title:"Invalid bank is too long",showConfirmButton:!1,timer:1500}):void("edit"===P.mode?(0,B.s)({isUpdate:!0,cb:function(e){ne((0,c.Z)((0,c.Z)({},P),{},{userCodeConfirmation:e}))}}):(0,B.L)({isConfirm:function(){$(P)}}))}function le(){var e;A(E,j),null===(e=K.current)||void 0===e||e.removeSelection(),(0,w.D)(500).then((function(){Y()}))}function ue(e){if(e.data.success)return O.invalidateQueries(z),le(),g().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});g().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}return(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,D.jsxs)(u.Z,{sx:function(e){return(0,a.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",marginBottom:"15px"})},children:[(0,D.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"},children:(0,D.jsx)(s.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",value:P.search,name:"search",onChange:ae,InputProps:{style:{height:"27px",fontSize:"14px"}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),Y()},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})}),(0,D.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===P.mode&&(0,D.jsx)(d.Z,{variant:"contained",startIcon:(0,D.jsx)(f.Z,{}),id:"entry-header-save-button",sx:{height:"30px",fontSize:"11px"},onClick:function(){ae({target:{value:"add",name:"mode"}})},children:"New"}),(0,D.jsx)(y.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",sx:{height:"30px",fontSize:"11px"},onClick:ce,startIcon:(0,D.jsx)(k.Z,{}),disabled:""===P.mode,loading:J||te,children:"Save"}),""!==P.mode&&(0,D.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,D.jsx)(C.Z,{}),color:"error",onClick:function(){g().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&le()}))},children:"Cancel"}),(0,D.jsx)(y.Z,{id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:p.Z[500],"&:hover":{backgroundColor:p.Z[600]}},loading:re,startIcon:(0,D.jsx)(h.Z,{}),disabled:"edit"!==P.mode,onClick:function(){(0,B.s)({isUpdate:!1,cb:function(e){ie({Bank_Code:P.Bank_Code,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,D.jsx)("form",{onSubmit:ce,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),void ce(e)},children:(0,D.jsxs)(u.Z,{sx:function(e){return(0,a.Z)({width:"100%",display:"flex",columnGap:"15px",flexDirection:"row"},e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"})},children:[(0,D.jsx)(s.Z,{InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},required:!0,variant:"outlined",size:"small",label:"Bank Code",name:"Bank_Code",value:P.Bank_Code,onChange:ae,disabled:"edit"===P.mode||""===P.mode}),(0,D.jsx)(s.Z,{required:!0,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},variant:"outlined",size:"small",label:"Bank Name",name:"Bank",value:P.Bank,onChange:ae,disabled:""===P.mode}),(0,D.jsx)(Z.Z,{sx:{".MuiTypography-root":{fontSize:"14px"},minWidth:"200px"},disabled:""===P.mode,control:(0,D.jsx)(b.Z,{size:"small",name:"Inactive",checked:P.Inactive,onChange:function(e){E({type:"UPDATE_FIELD",field:"Inactive",value:e.target.checked})}}),label:"Mark As Inactive"})]})}),(0,D.jsx)("div",{ref:F,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,D.jsx)(u.Z,{style:{height:"".concat(null===(N=F.current)||void 0===N?void 0:N.getBoundingClientRect().height,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,D.jsx)(S.Z,{ref:K,isLoading:W||re||te||J,columns:I,rows:U,table_id:"Bank_Code",isSingleSelection:!0,isRowFreeze:!1,dataSelection:function(e,n,t){var o=n.filter((function(n){return n.Bank_Code===e[0]}))[0];if(void 0===o||o.length<=0)return A(E,j),void ae({target:{value:"",name:"mode"}});var i={Bank_Code:o.Bank_Code,Bank:o.Bank,Inactive:"NO"===o.Inactive,mode:"edit"};A(E,i),"Delete"!==t&&"Backspace"!==t||(0,w.D)(350).then((function(){(0,B.s)({isUpdate:!1,cb:function(e){ie({Bank_Code:o.Bank_Code,userCodeConfirmation:e})}})}))}})})})]})}function A(e,n){Object.entries(n).forEach((function(n){var t=(0,r.Z)(n,2),o=t[0],i=t[1];e({type:"UPDATE_FIELD",field:o,value:i})}))}},64230:function(e,n,t){t.d(n,{L:function(){return l},s:function(){return c}});var o=t(74165),i=t(15861),r=t(21830),a=t.n(r);function c(e){var n;a().fire({title:"Are you sure!",html:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:e.isUpdate?"Are you sure you want to make this change?":"Are you sure you want to delete this?",icon:"warning",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Save",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(t){return(n=n||(0,i.Z)((0,o.Z)().mark((function n(t){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{e.cb(t)}catch(o){a().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)},allowOutsideClick:function(){return!a().isLoading()}}).then((function(n){if(n.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}function l(e){a().fire({title:"Are you sure?",text:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:"Do you want to proceed with saving?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(n){if(n.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}},42419:function(e,n,t){var o=t(64836);n.Z=void 0;var i=o(t(45649)),r=t(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");n.Z=a},27247:function(e,n,t){var o=t(64836);n.Z=void 0;var i=o(t(45649)),r=t(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=a},53329:function(e,n,t){var o=t(64836);n.Z=void 0;var i=o(t(45649)),r=t(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");n.Z=a},4378:function(e,n){n.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=2272.b4a5aff0.chunk.js.map