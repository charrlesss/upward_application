(self.webpackChunkupward=self.webpackChunkupward||[]).push([[3878],{58610:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return T}});var n=i(4942),a=i(1413),r=i(74165),d=i(15861),o=i(29439),s=i(72791),l=i(64554),c=i(48550),u=i(36151),f=i(77196),h=i(63466),m=i(13400),p=i(3380),x=i(91933),v=i(21830),w=i.n(v),y=i(48749),b=i(68096),g=i(94925),N=i(58406),Z=i(23786),_=i(39709),z=i(88019),A=i(16395),C=i(89767),S=i(86753),j=i(42419),k=i(27247),F=i(29823),M=i(53329),D=i(4378),L=i(64230),I=i(80184),B={description:"",remarks:"",fullname:"",search:"",mode:"",entry_fixed_assets_id:"",sub_account:"c02534ee-6d7e-40dd-a22b-bc9024fa12ca"};function T(){var e,t,i,v,T,E,V,H=(0,s.useRef)(null),R=(0,s.useState)([]),q=(0,o.Z)(R,2),U=q[0],P=q[1],K=(0,s.useReducer)(y.I6,B),O=(0,o.Z)(K,2),W=O[0],G=O[1],Q=(0,s.useContext)(p.V),Y=Q.myAxios,J=Q.user,X=(0,x.useQueryClient)(),$=(0,s.useRef)(null),ee="entry_fixed_assets_id",te=(0,x.useQuery)({queryKey:"sub-accounts",queryFn:function(){return(e=e||(0,d.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.get("/reference/sub-account",{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t,i;G({type:"UPDATE_FIELD",field:"sub_account",value:null===(t=e.data)||void 0===t||null===(i=t.defaultValue[0])||void 0===i?void 0:i.Sub_Acct})}}),ie=te.data,ne=te.isLoading,ae=te.refetch,re=(0,x.useQuery)({queryKey:"fixed-generate-id",queryFn:function(){return(t=t||(0,d.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.post("/reference/id-entry-generate-id",{sign:"FA",type:"entry fixed assets"},{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){be({target:{value:e.data.generateID,name:"entry_fixed_assets_id"}})}}),de=re.isLoading,oe=re.refetch,se=(0,x.useQuery)({queryKey:ee,queryFn:function(){return(i=i||(0,d.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.get("/reference/search-entry?entrySearch=".concat(W.search,"&entry=Fixed Assets"),{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){P(null===e||void 0===e?void 0:e.data.entry)}}),le=se.isLoading,ce=se.refetch,ue=(0,x.useMutation)({mutationKey:ee,mutationFn:function(e){return(v=v||(0,d.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.post("/reference/id-entry-fixed-assets",t,{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ge}),fe=ue.mutate,he=ue.isLoading,me=(0,x.useMutation)({mutationKey:ee,mutationFn:function(e){return(T=T||(0,d.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.post("/reference/entry-update?entry=Fixed Assets",t,{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ge}),pe=me.mutate,xe=me.isLoading,ve=(0,x.useMutation)({mutationKey:ee,mutationFn:function(e){return(E=E||(0,d.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.post("/reference/entry-delete?entry=Fixed Assets",t,{headers:{Authorization:"Bearer ".concat(null===J||void 0===J?void 0:J.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:ge}),we=ve.mutate,ye=ve.isLoading,be=function(e){var t=e.target,i=t.name,n=t.value;if(["fullname","description","remarks"].includes(i))return G({type:"UPDATE_FIELD",field:i,value:n.toUpperCase()});G({type:"UPDATE_FIELD",field:i,value:n})};function ge(e){if(e.data.success)return X.invalidateQueries(ee),Ze(),w().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500});w().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}function Ne(e){return""===W.fullname?w().fire({position:"center",icon:"error",title:"Fullname is required!",showConfirmButton:!1,timer:1500}):""===W.description?w().fire({position:"center",icon:"error",title:"Description is required!",showConfirmButton:!1,timer:1500}):W.fullname.length>=200?w().fire({position:"center",icon:"error",title:"Fullname is too Long!",showConfirmButton:!1,timer:1500}):(e.preventDefault(),void("edit"===W.mode?(0,L.s)({isUpdate:!0,cb:function(e){pe((0,a.Z)((0,a.Z)({},W),{},{userCodeConfirmation:e}))}}):(0,L.L)({isConfirm:function(){fe(W)}})))}function Ze(){var e;(0,z.setNewStateValue)(G,B),null===(e=$.current)||void 0===e||e.removeSelection(),(0,A.wait)(250).then((function(){ce(),oe(),ae()}))}return(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,I.jsxs)(l.Z,{sx:function(e){return(0,n.Z)({display:"flex",alignItems:"center",columnGap:"20px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1,marginBottom:"15px"})},children:[(0,I.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"},children:(0,I.jsx)(c.Z,{label:"Search",fullWidth:!0,size:"small",type:"text",value:W.search,name:"search",onChange:be,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),ce()},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"500px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})}),(0,I.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px"},children:(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===W.mode&&(0,I.jsx)(u.Z,{variant:"contained",startIcon:(0,I.jsx)(j.Z,{}),id:"entry-header-save-button",sx:{height:"30px",fontSize:"11px"},onClick:function(){oe(),be({target:{value:"add",name:"mode"}})},children:"New"}),(0,I.jsx)(_.Z,{id:"save-entry-header",color:"primary",variant:"contained",type:"submit",sx:{height:"30px",fontSize:"11px"},onClick:Ne,startIcon:(0,I.jsx)(M.Z,{}),disabled:""===W.mode,loading:he||xe,children:"Save"}),""!==W.mode&&(0,I.jsx)(u.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,I.jsx)(F.Z,{}),color:"error",onClick:function(){w().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&Ze()}))},children:"Cancel"}),(0,I.jsx)(_.Z,{id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:D.Z[500],"&:hover":{backgroundColor:D.Z[600]}},loading:ye,startIcon:(0,I.jsx)(k.Z,{}),disabled:"edit"!==W.mode,onClick:function(){(0,L.s)({isUpdate:!1,cb:function(e){we({id:W.entry_fixed_assets_id,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,I.jsx)("form",{onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||!["description","remarks","fullname","entry_fixed_assets_id"].includes(e.target.name)||(e.preventDefault(),Ne(e))},onSubmit:Ne,id:"Form-Fixed Assets",children:(0,I.jsxs)(l.Z,{sx:function(e){var t;return t={display:"flex",columnGap:"15px",flexDirection:"row"},(0,n.Z)(t,e.breakpoints.down("md"),{flexDirection:"column",rowGap:"10px"}),(0,n.Z)(t,"marginBottom","10px"),t},children:[de?(0,I.jsx)(_.Z,{loading:de}):(0,I.jsxs)(b.Z,{variant:"outlined",size:"small",disabled:""===W.mode,sx:{width:"150px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,I.jsx)(g.Z,{htmlFor:"fixed_assets-auto-generate-id-field",children:"Fixed Assets ID"}),(0,I.jsx)(f.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===W.mode,fullWidth:!0,label:"Fixed Assets ID",name:"entry_fixed_assets_id",value:W.entry_fixed_assets_id,onChange:be,readOnly:!0,id:"fixed_assets-auto-generate-id-field",endAdornment:(0,I.jsx)(h.Z,{position:"end",children:(0,I.jsx)(m.Z,{disabled:""===W.mode,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){oe()},children:(0,I.jsx)(S.Z,{})})})})]}),(0,I.jsx)(c.Z,{label:"Full Name",name:"fullname",minRows:10,fullWidth:!0,style:{marginBottom:"10px"},size:"small",required:!0,value:W.fullname,onChange:be,disabled:""===W.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,I.jsx)(c.Z,{label:"Description",name:"description",minRows:10,fullWidth:!0,style:{marginBottom:"10px"},size:"small",required:!0,value:W.description,onChange:be,disabled:""===W.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,I.jsx)(c.Z,{label:"Remarks",name:"remarks",minRows:10,fullWidth:!0,style:{marginBottom:"10px"},size:"small",value:W.remarks,onChange:be,disabled:""===W.mode,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),ne?(0,I.jsx)(_.Z,{loading:ne}):(0,I.jsxs)(b.Z,{fullWidth:!0,required:!0,size:"small",sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,I.jsx)(g.Z,{id:"Sub Account",children:"Sub Account"}),(0,I.jsx)(N.Z,{sx:{height:"27px",fontSize:"14px"},disabled:""===W.mode,value:W.sub_account,onChange:function(e){G({type:"UPDATE_FIELD",field:"sub_account",value:e.target.value})},labelId:"Sub Account",label:"Sub Account",name:"sub_account",children:null===ie||void 0===ie?void 0:ie.data.subAccount.map((function(e){return(0,I.jsx)(Z.Z,{value:e.Sub_Acct,children:e.NewShortName},e.Sub_Acct)}))})]})]})}),(0,I.jsx)("div",{ref:H,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,I.jsx)(l.Z,{style:{height:"".concat(null===(V=H.current)||void 0===V?void 0:V.getBoundingClientRect().height,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,I.jsx)(C.Z,{ref:$,isLoading:le||ye||xe||he,columns:y.fJ,rows:U,table_id:"entry_fixed_assets_id",isSingleSelection:!0,isRowFreeze:!1,dataSelection:function(e,t,i){var n=t.filter((function(t){return t.entry_fixed_assets_id===e[0]}))[0];if(void 0===n||n.length<=0)return(0,z.setNewStateValue)(G,B),void be({target:{value:"",name:"mode"}});be({target:{value:"edit",name:"mode"}}),(0,z.setNewStateValue)(G,n),"Delete"!==i&&"Backspace"!==i||(0,L.s)({isUpdate:!1,cb:function(e){we({id:n.entry_fixed_assets_id,userCodeConfirmation:e})}})}})})})]})}},48749:function(e,t,i){"use strict";i.d(t,{GY:function(){return l},I6:function(){return u},fJ:function(){return s},kb:function(){return d},m5:function(){return c},oy:function(){return r},y:function(){return o}});var n=i(4942),a=i(1413),r=[{field:"entry_client_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"sale_officer",headerName:"Sale Officer",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"option",headerName:"Option",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],d=[{field:"entry_employee_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"NewShortName",headerName:"Sub Account",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500}],o=[{field:"entry_agent_id",headerName:"ID",width:130},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:250},{field:"mobile",headerName:"Mobile",width:130},{field:"telephone",headerName:"Telephone",width:130},{field:"createdAt",headerName:"Created At",width:130},{field:"address",headerName:"Address",width:500},{field:"sub_account",headerName:"sub_account",width:500,hide:!0}],s=[{field:"entry_fixed_assets_id",headerName:"ID",width:130},{field:"fullname",headerName:"Full Name",width:250},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],l=[{field:"entry_supplier_id",headerName:"ID",width:130},{field:"company",headerName:"Company",width:200},{field:"firstname",headerName:"First Name",width:200},{field:"lastname",headerName:"Last Name",width:200},{field:"middlename",headerName:"Middle Name",width:200},{field:"email",headerName:"Email",width:200},{field:"mobile",headerName:"Mobile",width:200},{field:"telephone",headerName:"Telephone",width:200},{field:"tin_no",headerName:"TIN NO.",width:200},{field:"option",headerName:"Option",width:200},{field:"VAT_Type",headerName:"Vat Type",width:200},{field:"createdAt",headerName:"Created At",width:200},{field:"address",headerName:"Address",width:500}],c=[{field:"entry_others_id",headerName:"ID",width:130},{field:"description",headerName:"Description",flex:1},{field:"remarks",headerName:"Remarks",flex:1},{field:"createdAt",headerName:"Created At",width:200}],u=function(e,t){return"UPDATE_FIELD"===t.type?(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},t.field,t.value)):e}},80813:function(e,t,i){"use strict";var n=i(64836);t.Z=void 0;var a=n(i(45649)),r=i(80184),d=(0,a.default)((0,r.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),"Article");t.Z=d},22007:function(e,t,i){"use strict";var n=i(64836);t.Z=void 0;var a=n(i(45649)),r=i(80184),d=(0,a.default)((0,r.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"}),"CloudDownload");t.Z=d},69596:function(e,t,i){"use strict";var n=i(64836);t.Z=void 0;var a=n(i(45649)),r=i(80184),d=(0,a.default)((0,r.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");t.Z=d},27247:function(e,t,i){"use strict";var n=i(64836);t.Z=void 0;var a=n(i(45649)),r=i(80184),d=(0,a.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=d},73518:function(e,t,i){"use strict";var n=i(64836);t.Z=void 0;var a=n(i(45649)),r=i(80184),d=(0,a.default)((0,r.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download");t.Z=d},71640:function(e,t,i){"use strict";var n=i(64836);t.Z=void 0;var a=n(i(45649)),r=i(80184),d=(0,a.default)((0,r.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10zM8 13.01l1.41 1.41L11 12.84V17h2v-4.16l1.59 1.59L16 13.01 12.01 9 8 13.01z"}),"DriveFolderUpload");t.Z=d},80022:function(e,t,i){"use strict";var n=i(64836);t.Z=void 0;var a=n(i(45649)),r=i(80184),d=(0,a.default)((0,r.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"HighlightOff");t.Z=d},91421:function(e,t,i){"use strict";var n=i(64836);t.Z=void 0;var a=n(i(45649)),r=i(80184),d=(0,a.default)([(0,r.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,r.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");t.Z=d},3579:function(e,t,i){"use strict";var n=i(64836);t.Z=void 0;var a=n(i(45649)),r=i(80184),d=(0,a.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye");t.Z=d},3746:function(e,t,i){"use strict";var n=i(64836);t.Z=void 0;var a=n(i(45649)),r=i(80184),d=(0,a.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.Z=d},4378:function(e,t){"use strict";t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}},24654:function(){}}]);
//# sourceMappingURL=3878.139d1fd7.chunk.js.map