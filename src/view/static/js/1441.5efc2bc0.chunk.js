"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[1441,6086],{13784:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(1413),i=n(45987),a=n(71652),r=n(93862),l=n(93777),c=n(80184),u=["label","name","onChange","value","onKeyDown","inputRef","datePickerRef","fullWidth","textField"];function s(e){var t=e.label,n=e.name,s=e.onChange,d=e.value,p=e.onKeyDown,f=e.inputRef,h=e.datePickerRef,v=e.fullWidth,m=e.textField,x=(0,i.Z)(e,u);return(0,c.jsx)(a._,{dateAdapter:r.H,children:(0,c.jsx)(l.M,(0,o.Z)({value:d,onChange:s,ref:h,slotProps:{textField:(0,o.Z)({size:"small",label:t,name:n,onKeyDown:p,inputRef:f,fullWidth:v},m)},sx:{minWidth:"200px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}},x))})}},81582:function(e,t,n){n.d(t,{XT:function(){return f},ZP:function(){return p},rO:function(){return h}});n(72791);var o=n(88447),i=n(64554),a=n(20890),r=n(48550),l=n(13400),c=n(29823),u=n(89767),s=n(80184),d={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",boxShadow:24,p:4,heigth:"auto"};function p(e){var t=e.height,n=e.isLoading,p=(e.queryKey,e.columns),v=e.onSelectionChange,m=(e.setRows,e.rows),x=e.id,g=e.onCloseModal,y=e.showModal,w=e.onClickCloseIcon,C=e.searchOnChange,b=e.title,D=void 0===b?"":b,S=e.searchRef,Z=(e.onCellKeyDown,e.onSearchKeyEnter),I=void 0===Z?function(){}:Z,N=e.isRowSelectable,P=e.getCellClassName,M=f();return(0,s.jsx)(o.Z,{open:y,onClose:g,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsxs)(i.Z,{sx:d,children:[(0,s.jsx)(a.Z,{id:"modal-modal-title",variant:"h6",component:"h2",mb:2,children:D}),(0,s.jsx)(r.Z,{size:"small",label:"Search",sx:{marginBottom:"10px"},fullWidth:!0,onChange:C,InputProps:{inputRef:S},onKeyDown:function(e){var t;"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),I(null===S||void 0===S||null===(t=S.current)||void 0===t?void 0:t.value));h(e,M,null===S||void 0===S?void 0:S.current)}}),(0,s.jsx)("div",{className:"".concat(M," main-table-selection-container"),style:{position:"relative",height:"".concat(t+20,"px")},children:(0,s.jsx)(u.Z,{isSingleSelection:!0,isRowFreeze:!1,columns:p,isLoading:n,dataSelection:function(e,t,n){v(e,t)},table_id:x,rows:m,isRowSelectable:N,getCellClassName:P})}),(0,s.jsx)("div",{style:{position:"absolute",top:"10px",right:"10px"},children:(0,s.jsx)(l.Z,{"aria-label":"search-client",color:"secondary",onClick:w,children:(0,s.jsx)(c.Z,{})})})]})})}function f(){return"main-"+Math.floor(1e4*Math.random())}function h(e,t,n){var o=t;if("ArrowDown"===e.code){var i,a=document.querySelectorAll(".".concat(o," .MuiDataGrid-row"));e.preventDefault(),null===(i=a[0])||void 0===i||i.classList.add("hover-keyboard"),function(e,t){var n=document.querySelector(".".concat(e," .MuiDataGrid-row")),o=null===n||void 0===n?void 0:n.querySelector("input");null===o||void 0===o||o.focus();var i=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!0,view:window});null===n||void 0===n||n.dispatchEvent(i),null===o||void 0===o||o.addEventListener("keydown",(function(e){"ArrowUp"===e.key&&(e.preventDefault(),t.focus()),"ArrowUp"===e.key&&(null===n||void 0===n||n.classList.remove("hover-keyboard"))}))}(t,n),a.forEach((function(e,t){e.addEventListener("keydown",(function(e){if("ArrowUp"===e.key){var n,o;if(t<=0)return;return e.preventDefault(),null===(n=a[t])||void 0===n||n.classList.remove("hover-keyboard"),void(null===(o=a[t-1])||void 0===o||o.classList.add("hover-keyboard"))}if("ArrowDown"===e.key){var i,r;if(e.preventDefault(),t>=a.length-1)return;null===(i=a[t])||void 0===i||i.classList.remove("hover-keyboard"),null===(r=a[t+1])||void 0===r||r.classList.add("hover-keyboard")}}))}))}}},56580:function(e,t,n){n.d(t,{a:function(){return u}});var o=n(1413),i=n(45987),a=n(72791),r=n(30948),l=n(80184),c=["onChange"],u=a.forwardRef((function(e,t){var n=e.onChange,a=(0,i.Z)(e,c);return(0,l.jsx)(r.h3,(0,o.Z)((0,o.Z)({},a),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},allowNegative:!1,thousandSeparator:!0,valueIsNumericString:!0}))}))},89767:function(e,t,n){var o=n(93433),i=n(1413),a=n(29439),r=n(72791),l=n(57482),c=n(64554),u=n(56214),s=n(29961),d=n(54277),p=n(70169),f=n(6484),h=n(16088),v=n(80184),m=(0,r.createContext)({rows:[],rowSelectionModel:[],footerChildren:function(){return(0,v.jsx)("div",{})},footerPaginationPosition:"right-left",showFooterSelectedCount:!0}),x=(0,r.forwardRef)((function(e,t){var n=e.isLoading,c=e.columns,s=e.rows,d=e.table_id,p=e.isSingleSelection,f=e.isRowFreeze,h=e.dataSelection,x=e.CustomFooterComponent,g=void 0===x?w:x,y=e.isRowSelectable,C=e.getCellClassName,b=e.checkboxSelection,D=void 0===b||b,S=e.footerChildren,Z=void 0===S?function(e,t){return(0,v.jsx)("div",{})}:S,I=e.footerPaginationPosition,N=void 0===I?"right-left":I,P=e.showFooterSelectedCount,M=void 0===P||P,k=(0,r.useState)([]),j=(0,a.Z)(k,2),E=j[0],F=j[1];function L(e,t,n){h&&h(e,t,n)}(0,r.useImperativeHandle)(t,(function(){return{removeSelection:function(){F([])},getSelectedRows:function(){return s.filter((function(e){return null===E||void 0===E?void 0:E.includes(e[d])}))},setSelectedRows:function(e){F(e)}}}));var T=[];return(0,v.jsx)(m.Provider,{value:{showFooterSelectedCount:M,footerPaginationPosition:N,rowSelectionModel:E,rows:s,footerChildren:Z},children:(0,v.jsx)(u._$,{slots:{loadingOverlay:l.Z,footer:g},initialState:{pagination:{paginationModel:{pageSize:35}}},loading:n,getRowId:function(e){return e[d]},columns:c.filter((function(e){return!e.hide})),rows:s,showCellVerticalBorder:!0,showColumnVerticalBorder:!0,checkboxSelection:D,rowSelectionModel:E,rowHeight:25,columnHeaderHeight:35,pageSizeOptions:[10,20,35,50,75,100],sx:(0,i.Z)((0,i.Z)({"& .cash":{color:"#ec4899"},"& .check":{color:"#0891b2"},"& .approved":{color:"green"},"& .pending":{color:"orange"},"& .disapproved":{color:"red"},"& .normal":{color:"red"},"& .MuiDataGrid-row.Mui-selected:hover":{color:"black","& .MuiSvgIcon-root ":{fill:"#3b82f6"}},"& .hover-keyboard":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row:hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row.hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiTablePagination-root p ":{padding:"0 !important"}},{"& .MuiDataGrid-columnHeaders":{background:"#64748b",color:"white",fontSize:"14px"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer .MuiSvgIcon-root ":{display:p||f?"none":"block",fill:"white"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer input ":{display:p||f?"none":"block"}}),{fontSize:13,fontWeight:500,"& .MuiDataGrid-checkboxInput":{height:"27px",width:"27px"},"& .MuiDataGrid-checkboxInput svg":{height:"20px",width:"20px"}}),onRowSelectionModelChange:function(e){if(f){if(e.length<=0)return;if(T=e,E.includes(T[T.length-1]))return;return F(e),void L([e[e.length-1]],s,null)}if(!f&&p)if(E&&(null===E||void 0===E?void 0:E.length)>0){var t=new Set(E);F(e.filter((function(e){return!t.has(e)})))}else F(e);else F(e);L([e[e.length-1]],s,null)},onCellKeyDown:function(e,t){if(["NumpadEnter","Enter","Delete","Backspace"].includes(t.code))return t.preventDefault(),"Enter"===t.code||"NumpadEnter"===t.code?p&&!f?F((function(n){return n&&n.length>0&&n[0]===e.rowNode.id?(L([],s,t.code),[]):(L([e.rowNode.id],s,t.code),[e.rowNode.id])})):void F((function(n){return n&&!f&&n.length>0&&n.includes(e.rowNode.id)?(n=n.filter((function(t){return t!==e.rowNode.id})),L([],s,t.code),n):n&&f&&n.length>0&&n.includes(e.rowNode.id)?n:(L([e.rowNode.id],s,t.code),[].concat((0,o.Z)(n),[e.rowNode.id]))})):"Delete"===t.code||"Backspace"===t.code?(F([e.rowNode.id]),L([e.rowNode.id],s,t.code)):void 0},disableVirtualization:!0,isRowSelectable:y,getCellClassName:C})})}));function g(e){var t=e.page,n=e.onPageChange,o=e.className,i=(0,s.l)(),a=(0,d.P)(i,p.UB);return(0,v.jsx)(h.Z,{variant:"outlined",color:"primary",className:o,count:a,page:t+1,onChange:function(e,t){n(e,t-1)}})}function y(e){return(0,v.jsx)(f.x,(0,i.Z)({ActionsComponent:g},e))}function w(e){var t=(0,r.useContext)(m),n=t.rowSelectionModel,o=t.showFooterSelectedCount,a=t.footerPaginationPosition,l=t.footerChildren,u=t.rows;return(0,v.jsxs)(c.Z,{sx:{columnGap:"50px",display:"flex",width:"100%",justifyContent:"space-between",px:3,alignItems:"center",flexDirection:"right-left"===a?"row-reverse":"row"},children:[(0,v.jsx)(y,(0,i.Z)({},e)),(0,v.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"right-left"===a?"flex-start":"flex-end",flex:1,alignItems:"center"},children:[o&&(0,v.jsxs)("div",{children:["Selected:",null===n||void 0===n?void 0:n.length]}),(0,v.jsx)("div",{children:l(n,u)})]})]})}t.Z=x},1441:function(e,t,n){n.r(t),n.d(t,{default:function(){return K},reducer:function(){return _}});var o=n(93433),i=n(74165),a=n(15861),r=n(29439),l=n(4942),c=n(1413),u=n(72791),s=n(48550),d=n(36151),p=n(68096),f=n(94925),h=n(77196),v=n(63466),m=n(13400),x=n(5712),g=n(58406),y=n(23786),w=n(64554),C=n(13784),b=n(39709),D=n(42419),S=n(53329),Z=n(29823),I=n(21830),N=n.n(I),P=n(3380),M=n(86753),k=n(91933),j=n(56580),E=n(93263),F=n(91421),L=n(79018),T=n(89767),z=n(64230),A=n(80184),R={sub_refNo:"",refNo:"",datePetty:new Date,payee:"",explanation:"",transactionPurpose:"",transactionCode:"",transactionTitle:"",transactionShort:"",clientName:"",clientID:"",amount:"",invoice:"",option:"non-vat",search:"",pettyCashMode:""},_=function(e,t){return"UPDATE_FIELD"===t.type?(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},t.field,t.value)):e},U=[{field:"purpose",headerName:"Purpose",flex:1,minWidth:400},{field:"amount",headerName:"Amount",minWidth:170},{field:"usage",headerName:"Usage",flex:1,minWidth:300},{field:"accountID",headerName:"Account ID",flex:1,minWidth:300},{field:"sub_account",headerName:"Sub Account",minWidth:80},{field:"clientID",headerName:"ID No",minWidth:100},{field:"clientName",headerName:"Name",flex:1,minWidth:300},{field:"accountCode",headerName:"Accoount Code",minWidth:200},{field:"accountShort",headerName:"Account Short",flex:1,minWidth:200},{field:"vatType",headerName:"Vat Type",flex:1,minWidth:100},{field:"invoice",headerName:"Invoice",flex:1,minWidth:100},{field:"TempID",headerName:"TempId",hide:!0}];function K(){var e,t,n,l,I,K=(0,u.useRef)(null),W=(0,u.useContext)(P.V),q=W.myAxios,H=W.user,O=(0,u.useReducer)(_,R),V=(0,r.Z)(O,2),G=V[0],Q=V[1],Y=(0,u.useState)({edit:!1,updateId:""}),X=(0,r.Z)(Y,2),$=X[0],J=X[1],ee=(0,u.useState)([]),te=(0,r.Z)(ee,2),ne=te[0],oe=te[1],ie=(0,u.useRef)(null),ae=(0,u.useRef)(null),re=(0,u.useRef)(null),le=(0,u.useRef)(null),ce=(0,u.useRef)(null),ue=(0,u.useRef)(null),se=(0,u.useRef)(null),de=(0,u.useRef)(null),pe=new k.QueryClient,fe=""===G.pettyCashMode,he=(0,u.useRef)(null),ve=(0,k.useQuery)({queryKey:"petty-cash-id-generator",queryFn:function(){return(e=e||(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.get("/task/accounting/get-petty-cash-id",{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},refetchOnWindowFocus:!1,onSuccess:function(e){var t=e;"UCSMI"!==(null===H||void 0===H?void 0:H.department)&&(Q({type:"UPDATE_FIELD",field:"refNo",value:t.data.pettyCashId[0].petty_cash_id}),Q({type:"UPDATE_FIELD",field:"sub_refNo",value:t.data.pettyCashId[0].petty_cash_id}))}}),me=ve.isLoading,xe=ve.refetch,ge=(0,k.useMutation)({mutationKey:"add-update-petty-cash",mutationFn:function(e){return(t=t||(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.post("/task/accounting/add-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;return t.data.success?(R.pettyCashMode="",B(Q,R),xe(),oe([]),pe.invalidateQueries("petty-cash-search"),N().fire({position:"center",icon:"success",title:t.data.message,timer:1500})):N().fire({position:"center",icon:"warning",title:t.data.message,timer:1500})}}),ye=ge.isLoading,we=ge.mutate,Ce=(0,k.useMutation)({mutationKey:"load-selected-petty-cash",mutationFn:function(e){return(n=n||(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.post("/task/accounting/load-selected-petty-cash",t,{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e.data.loadSelectedPettyCash;B(Q,(0,c.Z)((0,c.Z)({},G),{sub_refNo:t[0].PC_No,refNo:t[0].PC_No,datePetty:t[0].PC_Date,payee:t[0].Payee,explanation:t[0].Explanation,pettyCashMode:"edit"})),oe(t)}}),be=Ce.isLoading,De=Ce.mutate,Se=(0,k.useQuery)({queryKey:"petty-log",queryFn:function(){return(l=l||(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.get("/task/accounting/get-petty-log",{headers:{Authorization:"Bearer ".concat(null===H||void 0===H?void 0:H.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Ze=Se.isLoading,Ie=Se.data,Ne=(0,E.Z)({link:{url:"/task/accounting/search-pdc-policy-id",queryUrlName:"searchPdcPolicyIds"},columns:[{field:"Type",headerName:"Type",width:130},{field:"IDNo",headerName:"ID No.",width:200},{field:"Name",headerName:"Name",flex:1},{field:"ID",headerName:"ID",flex:1,hide:!0}],queryKey:"collection-polidy-ids",uniqueId:"IDNo",responseDataKey:"clientsId",onSelected:function(e,t){Q({type:"UPDATE_FIELD",field:"clientName",value:e[0].Name}),Q({type:"UPDATE_FIELD",field:"clientID",value:e[0].IDNo}),je()},searchRef:de}),Pe=Ne.ModalComponent,Me=Ne.openModal,ke=Ne.isLoading,je=Ne.closeModal,Ee=(0,E.Z)({link:{url:"/task/accounting/search-petty-cash",queryUrlName:"searchPettyCash"},columns:[{field:"PC_Date",headerName:"Type",width:130},{field:"PC_No",headerName:"ID No.",width:200},{field:"Payee",headerName:"Name",flex:1},{field:"Explanation",headerName:"ID",flex:1},{field:"Explanation",headerName:"ID",flex:1,hide:!0}],queryKey:"petty-cash-search",uniqueId:"PC_No",responseDataKey:"searchPettyCash",onSelected:function(e){De({PC_No:e[0].PC_No}),Q({type:"UPDATE_FIELD",field:"pettyCashMode",value:"edit"}),ze()},onCloseFunction:function(e){Q({type:"UPDATE_FIELD",field:"search",value:e})},searchRef:de}),Fe=Ee.ModalComponent,Le=Ee.openModal,Te=Ee.isLoading,ze=Ee.closeModal,Ae=function(e){var t=e.target,n=t.name,o=t.value;Q({type:"UPDATE_FIELD",field:n,value:o})};function Re(){return G.payee.length>=200?N().fire({position:"center",icon:"warning",title:"Payee is too long!",timer:1500}):G.invoice.length>=200?N().fire({position:"center",icon:"warning",title:"Invoice is too long!",timer:1500}):G.amount.length>=200?N().fire({position:"center",icon:"warning",title:"Amount is too long!",timer:1500}):G.clientID.length>=200?N().fire({position:"center",icon:"warning",title:"Usage is too long!",timer:1500}):""===G.payee?N().fire({position:"center",icon:"warning",title:"Please provide payee!",timer:1500}).then((function(e){(0,L.D)(300).then((function(){var e;null===(e=re.current)||void 0===e||e.focus()}))})):""===G.explanation?N().fire({position:"center",icon:"warning",title:"Please provide explanation!",timer:1500}).then((function(e){(0,L.D)(300).then((function(){var e;null===(e=le.current)||void 0===e||e.focus()}))})):ne.length<=0?N().fire({position:"center",icon:"warning",title:"Please provide transaction entry!",timer:1500}):void("edit"===G.pettyCashMode?(0,z.s)({isUpdate:!0,cb:function(e){we({refNo:G.refNo,datePetty:G.datePetty,payee:G.payee,explanation:G.explanation,hasSelected:"edit"===G.pettyCashMode,pettyCash:ne,userCodeConfirmation:e})}}):(0,z.L)({isConfirm:function(){we({refNo:G.refNo,datePetty:G.datePetty,payee:G.payee,explanation:G.explanation,hasSelected:"edit"===G.pettyCashMode,pettyCash:ne})}}))}function _e(){return""===G.transactionCode?N().fire({position:"center",icon:"warning",title:"Please provide transaction",timer:1500}).then((function(){(0,L.D)(300).then((function(){var e;null===(e=ue.current)||void 0===e||e.focus()}))})):""===G.clientID?N().fire({position:"center",icon:"warning",title:"Please provide usage",timer:1500}).then((function(){(0,L.D)(300).then((function(){Me()}))})):""===G.amount||parseFloat(G.amount.replace(/,/g,""))<1?N().fire({position:"center",icon:"warning",title:"Please provide proper amount",timer:1500}).then((function(){(0,L.D)(300).then((function(){var e;null===(e=se.current)||void 0===e||e.focus()}))})):(oe((function(e){var t="";t=$.edit?$.updateId:r(e.length?e[e.length-1].TempID:"000");var n=[];if(e=e.filter((function(e){return e.TempID!==t})),n.push({purpose:G.transactionPurpose,amount:parseFloat(G.amount).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),usage:"".concat(G.clientName," > ").concat(G.clientID," > HO"),accountID:"".concat(G.transactionShort," > ").concat(G.transactionCode),sub_account:"HO",clientID:G.clientID,clientName:G.clientName,accountCode:G.transactionCode,accountShort:G.transactionShort,vatType:G.option.toUpperCase(),invoice:G.invoice,TempID:t}),"Input Tax"!==G.transactionPurpose&&"vat"===G.option){var i=r(e[e.length-1].TempID),a=.12*(parseFloat(G.amount.replace(/,/g,""))/1.12);n.push({purpose:G.transactionPurpose,amount:parseFloat(a.toFixed(2)).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),usage:"".concat(G.clientName," > ").concat(G.clientID," > HO"),accountID:"".concat(G.transactionShort," > ").concat(G.transactionCode),sub_account:"HO",clientID:G.clientID,clientName:G.clientName,accountCode:"1.06.02",accountShort:"Input Tax",vatType:G.option.toUpperCase(),invoice:G.invoice,TempID:i})}function r(e){return(parseInt(e.match(/\d+/)[0])+1).toString().padStart(3,"0")}return e=[].concat((0,o.Z)(e),n)})),R.datePetty=G.datePetty,R.payee=G.payee,R.explanation=G.explanation,R.pettyCashMode=G.pettyCashMode,R.sub_refNo=G.sub_refNo,R.refNo=G.refNo,B(Q,R),void J({edit:!1,updateId:""}))}return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[Te?(0,A.jsx)(b.Z,{loading:Te}):(0,A.jsx)(s.Z,{label:"Search",size:"small",name:"search",value:G.search,onChange:Ae,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),Le(e.target.value)},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"300px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),""===G.pettyCashMode&&(0,A.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,A.jsx)(D.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){Q({type:"UPDATE_FIELD",field:"pettyCashMode",value:"add"})},children:"New"}),(0,A.jsx)(b.Z,{sx:{height:"30px",fontSize:"11px"},id:"save-entry-header",color:"primary",variant:"contained",type:"submit",onClick:Re,disabled:""===G.pettyCashMode,startIcon:(0,A.jsx)(S.Z,{sx:{width:15,height:15}}),loading:ye,children:"edit"===G.pettyCashMode?"Update":"Save"}),""!==G.pettyCashMode&&(0,A.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,A.jsx)(Z.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){N().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(R.pettyCashMode="",B(Q,R),xe(),oe([]))}))},children:"Cancel"})]}),(0,A.jsxs)("fieldset",{style:{border:"1px solid #cbd5e1",borderRadius:"5px",position:"relative",width:"100%",height:"auto",display:"flex",marginTop:"10px",gap:"10px",padding:"15px"},children:[me?(0,A.jsx)(b.Z,{loading:me}):(0,A.jsxs)(p.Z,{sx:{width:"160px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},variant:"outlined",size:"small",disabled:fe,children:[(0,A.jsx)(f.Z,{htmlFor:"return-check-id-field",children:"Ref. No."}),(0,A.jsx)(h.Z,{sx:{height:"27px",fontSize:"14px"},disabled:fe,label:"Ref. No.",name:"refNo",value:G.refNo,onChange:Ae,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),Re()},readOnly:"UCSMI"!==(null===H||void 0===H?void 0:H.department),id:"return-check-id-field",endAdornment:(0,A.jsx)(v.Z,{position:"end",children:(0,A.jsx)(m.Z,{ref:ae,disabled:fe,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){xe()},children:(0,A.jsx)(M.Z,{})})})})]}),(0,A.jsx)(C.Z,{fullWidth:!1,disabled:fe,label:"Date",onChange:function(e){Q({type:"UPDATE_FIELD",field:"datePetty",value:e})},value:new Date(G.datePetty),onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=ie.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},datePickerRef:ie}),(0,A.jsx)(s.Z,{disabled:fe,label:"Payee",size:"small",name:"payee",value:G.payee,onChange:Ae,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),Re()},InputProps:{style:{height:"27px",fontSize:"14px",width:"280px"}},sx:{".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},inputRef:re}),(0,A.jsx)(s.Z,{disabled:fe,label:"Explanation",size:"small",name:"explanation",value:G.explanation,onChange:Ae,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),Re()},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},inputRef:le})]}),(0,A.jsxs)("fieldset",{style:{border:"1px solid #cbd5e1",borderRadius:"5px",position:"relative",width:"100%",height:"auto",marginTop:"10px",padding:"15px"},children:[(0,A.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[Ze?(0,A.jsx)(b.Z,{loading:Ze}):(0,A.jsx)(x.Z,{fullWidth:!0,freeSolo:!0,options:null===Ie||void 0===Ie?void 0:Ie.data.pettyLog,onChange:function(e,t){t&&(Q({type:"UPDATE_FIELD",field:"transactionCode",value:t.Acct_Code}),Q({type:"UPDATE_FIELD",field:"transactionTitle",value:t.Acct_Title}),Q({type:"UPDATE_FIELD",field:"transactionShort",value:t.Short}))},onInputChange:function(e,t,n){if("clear"===n)return Q({type:"UPDATE_FIELD",field:"transactionPurpose",value:""});Q({type:"UPDATE_FIELD",field:"transactionPurpose",value:t})},inputValue:G.transactionPurpose,getOptionLabel:function(e){return e.Purpose},sx:{".MuiFormLabel-root":{fontSize:"14px"},".MuiInputBase-input":{width:"100% !important"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},".MuiAutocomplete-input ":{position:"absolute"}},renderInput:function(e){return(0,A.jsx)(s.Z,(0,c.Z)((0,c.Z)({},e),{},{size:"small",label:"Transaction",name:"transactionPurpose",InputProps:(0,c.Z)((0,c.Z)({},e.InputProps),{},{inputRef:ue,style:{height:"27px",fontSize:"14px"}}),onChange:Ae}))},disabled:fe}),ke?(0,A.jsx)(b.Z,{loading:ke}):(0,A.jsxs)(p.Z,{sx:{minWidth:"400px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},variant:"outlined",size:"small",disabled:fe,children:[(0,A.jsx)(f.Z,{htmlFor:"client-list",children:"Usage"}),(0,A.jsx)(h.Z,{sx:{height:"27px",fontSize:"14px"},disabled:fe,label:"Usage",name:"clientName",value:G.clientName,onChange:Ae,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),Me(G.clientName)},id:"client-list",endAdornment:(0,A.jsx)(v.Z,{position:"end",children:(0,A.jsx)(m.Z,{ref:ae,disabled:fe,color:"secondary",edge:"end",onClick:function(){Me(G.clientName)},children:(0,A.jsx)(F.Z,{})})})})]}),(0,A.jsxs)(g.Z,{labelId:"label-selection-reason",value:G.option,name:"option",onChange:Ae,disabled:fe,autoWidth:!0,sx:{height:"27px",fontSize:"14px",width:"200px"},children:[(0,A.jsx)(y.Z,{value:"vat",children:"VAT"}),(0,A.jsx)(y.Z,{value:"non-vat",children:"NON-VAT"})]})]}),(0,A.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[(0,A.jsx)(s.Z,{sx:{".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},disabled:fe,name:"amount",label:"Amount",size:"small",value:G.amount,onChange:Ae,placeholder:"0.00",InputProps:{inputComponent:j.a,inputRef:se,style:{height:"27px",fontSize:"14px",width:"200px"}},onBlur:function(){Q({type:"UPDATE_FIELD",field:"amount",value:parseFloat(G.amount.replace(/,/g,"")).toFixed(2)})},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),_e()}}),(0,A.jsx)(s.Z,{sx:{".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},InputProps:{inputRef:se,style:{height:"27px",fontSize:"14px",width:"300px"}},disabled:fe,label:"Invoice",size:"small",name:"invoice",value:G.invoice,onChange:Ae,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),_e()},inputRef:ce}),(0,A.jsx)(d.Z,{disabled:fe,color:"success",variant:"contained",style:{gridArea:"button",height:"27px",fontSize:"14px"},startIcon:(0,A.jsx)(D.Z,{}),onClick:function(){_e()},children:$.edit?"Update Transaction":"add Transaction"})]})]}),(0,A.jsx)("div",{ref:K,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,A.jsx)(w.Z,{style:{height:"".concat(null===(I=K.current)||void 0===I?void 0:I.getBoundingClientRect().height,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,A.jsx)(T.Z,{ref:he,isLoading:ye||be,columns:U,rows:ne,table_id:"TempID",isSingleSelection:!0,isRowFreeze:!1,dataSelection:function(e,t,n){var o=t.filter((function(t){return t.TempID===e[0]}))[0];if(void 0===o||o.length<=0)return J({edit:!1,updateId:""}),void B(Q,(0,c.Z)((0,c.Z)({},G),{transactionPurpose:"",transactionCode:"",transactionTitle:"",transactionShort:"",clientName:"",clientID:"",amount:"",invoice:"",option:"non-vat"}));"Delete"!==n&&"Backspace"!==n?(B(Q,(0,c.Z)((0,c.Z)({},G),{transactionPurpose:o.purpose,transactionCode:o.accountCode,transactionTitle:o.purpose,transactionShort:o.DRShort,clientName:o.clientName,clientID:o.clientID,amount:o.amount,invoice:o.invoice,option:o.vatType.toLowerCase()})),J({edit:!0,updateId:o.TempID})):N().fire({title:"Are you sure?",text:"You won't to delete this Check No. ".concat(o.Check_No),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){var n;if(t.isConfirmed)return oe((function(t){return t.filter((function(t){return t.TempID!==e[0]}))}));null===(n=he.current)||void 0===n||n.removeSelection()}))}})})}),Pe,Fe]})}function B(e,t){Object.entries(t).forEach((function(t){var n=(0,r.Z)(t,2),o=n[0],i=n[1];e({type:"UPDATE_FIELD",field:o,value:i})}))}},93263:function(e,t,n){var o,i=n(29439),a=n(74165),r=n(15861),l=n(72791),c=n(91933),u=n(3380),s=n(81582),d=n(54164),p=n(80184);function f(e,t,n){return(o=o||(0,r.Z)((0,a.Z)().mark((function e(t,n,o){var i,r=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.length>3&&void 0!==r[3]?r[3]:"",e.abrupt("return",t.get("".concat(null===o||void 0===o?void 0:o.url,"?").concat(null===o||void 0===o?void 0:o.queryUrlName,"=").concat(i),{headers:{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.accessToken)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.Z=function(e){var t,n,o=e.link,h=e.uniqueId,v=e.queryKey,m=e.responseDataKey,x=e.columns,g=e.onSelected,y=void 0===g?function(){}:g,w=e.onRemoveSelected,C=void 0===w?function(){}:w,b=e.onSuccess,D=void 0===b?function(){}:b,S=e.searchRef,Z=e.onCellKeyDown,I=e.onCloseFunction,N=void 0===I?function(){}:I,P=e.CustomizeAxios,M=void 0===P?f:P,k=e.isRowSelectable,j=e.getCellClassName,E=(0,l.useContext)(u.V),F=E.myAxios,L=E.user,T=(0,l.useState)(!1),z=(0,i.Z)(T,2),A=z[0],R=z[1],_=(0,l.useState)([]),U=(0,i.Z)(_,2),K=U[0],B=U[1];function W(){return(t=t||(0,r.Z)((0,a.Z)().mark((function e(){var t,n=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,M(F,L,o,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=(0,c.useQuery)({queryKey:v,queryFn:function(){return(n=n||(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;B(t.data[m]),D(t)},refetchOnWindowFocus:!1}),H=q.isLoading,O=q.refetch;return{show:A,rows:K,isLoading:H,openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,d.flushSync)((function(){R(!0)})),null!==S&&void 0!==S&&S.current&&(S.current.value=e,W(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));B(e.data[m]),null!==S&&void 0!==S&&S.current&&S.current.focus()})))},closeModal:function(){var e;(R(!1),N)&&N(null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.value)},ModalComponent:(0,p.jsx)(s.ZP,{getCellClassName:j,searchRef:S,showModal:A,onCloseModal:function(){var e;(R(!1),N)&&N(null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.value)},onClickCloseIcon:function(){var e;(R(!1),N)&&N(null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.value)},searchOnChange:function(e){},onSearchKeyEnter:function(e){W(e).then((function(e){if(null===e||void 0===e||!e.data.success)return alert("Error : ".concat(null===e||void 0===e?void 0:e.data.message));B(e.data[m])}))},onCellKeyDown:Z,height:300,isLoading:H,queryKey:v,columns:x,onSelectionChange:function(e,t){if(e.length<=0)return C(t);var n=new Set(e),o=t.filter((function(e){return n.has(e[h].toString())}));o.length<=0||y(o,t)},id:h,rows:K,setRows:B,isRowSelectable:k}),refetch:O}}},64230:function(e,t,n){n.d(t,{L:function(){return c},s:function(){return l}});var o=n(74165),i=n(15861),a=n(21830),r=n.n(a);function l(e){var t;r().fire({title:"Are you sure!",html:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:e.isUpdate?"Are you sure you want to make this change?":"Are you sure you want to delete this?",icon:"warning",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Save",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(n){return(t=t||(0,i.Z)((0,o.Z)().mark((function t(n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.cb(n)}catch(o){r().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},allowOutsideClick:function(){return!r().isLoading()}}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}function c(e){r().fire({title:"Are you sure?",text:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:"Do you want to proceed with saving?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),r=(0,i.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=r},91421:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),r=(0,i.default)([(0,a.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,a.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");t.Z=r},86753:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),r=(0,i.default)((0,a.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt");t.Z=r},53329:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),r=(0,i.default)((0,a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=r}}]);
//# sourceMappingURL=1441.5efc2bc0.chunk.js.map