"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[4951],{89767:function(e,t,n){var o=n(93433),i=n(1413),r=n(29439),a=n(72791),l=n(57482),u=n(64554),s=n(56214),d=n(29961),c=n(54277),p=n(70169),f=n(6484),h=n(16088),v=n(80184),x=(0,a.createContext)({rows:[],rowSelectionModel:[],footerChildren:function(){return(0,v.jsx)("div",{})},footerPaginationPosition:"right-left",showFooterSelectedCount:!0}),m=(0,a.forwardRef)((function(e,t){var n=e.isLoading,u=e.columns,d=e.rows,c=e.table_id,p=e.isSingleSelection,f=e.isRowFreeze,h=e.dataSelection,m=e.CustomFooterComponent,g=void 0===m?P:m,N=e.isRowSelectable,w=e.getCellClassName,y=e.checkboxSelection,C=void 0===y||y,S=e.footerChildren,Z=void 0===S?function(e,t){return(0,v.jsx)("div",{})}:S,D=e.footerPaginationPosition,b=void 0===D?"right-left":D,E=e.showFooterSelectedCount,k=void 0===E||E,M=(0,a.useState)([]),I=(0,r.Z)(M,2),R=I[0],A=I[1];function F(e,t,n){h&&h(e,t,n)}(0,a.useImperativeHandle)(t,(function(){return{removeSelection:function(){A([])},getSelectedRows:function(){return d.filter((function(e){return null===R||void 0===R?void 0:R.includes(e[c])}))},setSelectedRows:function(e){A(e)}}}));var j=[];return(0,v.jsx)(x.Provider,{value:{showFooterSelectedCount:k,footerPaginationPosition:b,rowSelectionModel:R,rows:d,footerChildren:Z},children:(0,v.jsx)(s._$,{slots:{loadingOverlay:l.Z,footer:g},initialState:{pagination:{paginationModel:{pageSize:35}}},loading:n,getRowId:function(e){return e[c]},columns:u.filter((function(e){return!e.hide})),rows:d,showCellVerticalBorder:!0,showColumnVerticalBorder:!0,checkboxSelection:C,rowSelectionModel:R,rowHeight:25,columnHeaderHeight:35,pageSizeOptions:[10,20,35,50,75,100],sx:(0,i.Z)((0,i.Z)({"& .cash":{color:"#ec4899"},"& .check":{color:"#0891b2"},"& .approved":{color:"green"},"& .pending":{color:"orange"},"& .disapproved":{color:"red"},"& .normal":{color:"red"},"& .MuiDataGrid-row.Mui-selected:hover":{color:"black","& .MuiSvgIcon-root ":{fill:"#3b82f6"}},"& .hover-keyboard":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row:hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiDataGrid-row.hover":{background:"#2563eb",color:"white","& .MuiSvgIcon-root ":{fill:"white"}},"& .MuiTablePagination-root p ":{padding:"0 !important"}},{"& .MuiDataGrid-columnHeaders":{background:"#64748b",color:"white",fontSize:"14px"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer .MuiSvgIcon-root ":{display:p||f?"none":"block",fill:"white"},"& .MuiDataGrid-columnHeaderCheckbox .MuiDataGrid-columnHeaderTitleContainer input ":{display:p||f?"none":"block"}}),{fontSize:13,fontWeight:500,"& .MuiDataGrid-checkboxInput":{height:"27px",width:"27px"},"& .MuiDataGrid-checkboxInput svg":{height:"20px",width:"20px"}}),onRowSelectionModelChange:function(e){if(f){if(e.length<=0)return;if(j=e,R.includes(j[j.length-1]))return;return A(e),void F([e[e.length-1]],d,null)}if(!f&&p)if(R&&(null===R||void 0===R?void 0:R.length)>0){var t=new Set(R);A(e.filter((function(e){return!t.has(e)})))}else A(e);else A(e);F([e[e.length-1]],d,null)},onCellKeyDown:function(e,t){if(["NumpadEnter","Enter","Delete","Backspace"].includes(t.code))return t.preventDefault(),"Enter"===t.code||"NumpadEnter"===t.code?p&&!f?A((function(n){return n&&n.length>0&&n[0]===e.rowNode.id?(F([],d,t.code),[]):(F([e.rowNode.id],d,t.code),[e.rowNode.id])})):void A((function(n){return n&&!f&&n.length>0&&n.includes(e.rowNode.id)?(n=n.filter((function(t){return t!==e.rowNode.id})),F([],d,t.code),n):n&&f&&n.length>0&&n.includes(e.rowNode.id)?n:(F([e.rowNode.id],d,t.code),[].concat((0,o.Z)(n),[e.rowNode.id]))})):"Delete"===t.code||"Backspace"===t.code?(A([e.rowNode.id]),F([e.rowNode.id],d,t.code)):void 0},disableVirtualization:!0,isRowSelectable:N,getCellClassName:w})})}));function g(e){var t=e.page,n=e.onPageChange,o=e.className,i=(0,d.l)(),r=(0,c.P)(i,p.UB);return(0,v.jsx)(h.Z,{variant:"outlined",color:"primary",className:o,count:r,page:t+1,onChange:function(e,t){n(e,t-1)}})}function N(e){return(0,v.jsx)(f.x,(0,i.Z)({ActionsComponent:g},e))}function P(e){var t=(0,a.useContext)(x),n=t.rowSelectionModel,o=t.showFooterSelectedCount,r=t.footerPaginationPosition,l=t.footerChildren,s=t.rows;return(0,v.jsxs)(u.Z,{sx:{columnGap:"50px",display:"flex",width:"100%",justifyContent:"space-between",px:3,alignItems:"center",flexDirection:"right-left"===r?"row-reverse":"row"},children:[(0,v.jsx)(N,(0,i.Z)({},e)),(0,v.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"right-left"===r?"flex-start":"flex-end",flex:1,alignItems:"center"},children:[o&&(0,v.jsxs)("div",{children:["Selected:",null===n||void 0===n?void 0:n.length]}),(0,v.jsx)("div",{children:l(n,s)})]})]})}t.Z=m},84951:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var o=n(74165),i=n(15861),r=n(29439),a=n(4942),l=n(1413),u=n(72791),s=n(68096),d=n(94925),c=n(77196),p=n(63466),f=n(13400),h=n(5712),v=n(48550),x=n(58406),m=n(23786),g=n(36151),N=n(64554),P=n(39709),w=n(42419),y=n(29823),C=n(21830),S=n.n(C),Z=n(3380),D=n(91933),b=n(89767),E=n(25756),k=n(86753),M=n(80184),I=["","Fully Paid","Check Replacement","Account Closed","Hold","Not Renewed By Camfin"],R={RCPNo:"",PNNo:"",client:"",reason:"",requestMode:""},A={RCPNo:"",PNNo:"",client:"",reason:"",approvedMode:"",authCode:""},F=function(e,t){return"UPDATE_FIELD"===t.type?(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},t.field,t.value)):e},j=[{field:"Check_Date",headerName:"Date",minWidth:150},{field:"Bank",headerName:"Bank",minWidth:150},{field:"Check_No",headerName:"Check No.",minWidth:150},{field:"Check_Amnt",headerName:"Check",minWidth:150,type:"number"},{field:"Status",headerName:"Status",minWidth:150},{field:"RCPNO",headerName:"RCPNO",minWidth:150},{field:"temp_id",headerName:"temp_id",minWidth:100,hide:!0}],L=[{field:"Check_Date",headerName:"Date",minWidth:130},{field:"Bank",headerName:"Bank",minWidth:130},{field:"Check_No",headerName:"Check No.",minWidth:120},{field:"Check_Amnt",headerName:"Check",minWidth:130,type:"number"},{field:"RCPNO",headerName:"PDC_ID",minWidth:100,hide:!0},{field:"reason",headerName:"reason",minWidth:100,hide:!0},{field:"Status",headerName:"Status",minWidth:100}];function z(){var e=(0,u.useContext)(Z.V).user,t=(0,E.Z)([(0,M.jsx)(T,{}),(0,M.jsx)(_,{})]),n=t.currentStepIndex,o=t.step,i=t.goTo,r=function(e){return{border:"none",outline:"none",backgroundColor:"rgba(51, 51, 51, 0.05)",borderWidth:"0",color:n===e?"#7e22ce":"#333333",cursor:"pointer",display:"inline-block",fontFamily:'"Haas Grot Text R Web", "Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"14px",fontWeight:"500",lineHeight:"20px",listStyle:"none",margin:"0",padding:"10px 12px",textAlign:"center",transition:"all 200ms",verticalAlign:"baseline",whiteSpace:"nowrap",userSelect:"none",touchAction:"manipulation",position:"relative",overflow:"hidden"}};return(0,M.jsxs)("div",{style:{width:"100%",height:"calc(100vh - 80px)",maxHeight:"100%",display:"flex",flexDirection:"column"},children:[(0,M.jsxs)("div",{style:{display:"flex"},children:[(0,M.jsxs)("button",{style:(0,l.Z)({},r(0)),onClick:function(){return i(0)},children:[(0,M.jsx)("span",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(206, 214, 211, 0.18)",transition:"all 200ms",transform:q(n,0)}}),"Pullout Request"]}),"ADMIN"===(null===e||void 0===e?void 0:e.userAccess)&&(0,M.jsxs)("button",{style:(0,l.Z)({},r(1)),onClick:function(){return i(1)},children:[(0,M.jsx)("span",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(206, 214, 211, 0.18)",transition:"all 200ms",transform:q(n,1)}}),"Pullout Approved"]})]}),(0,M.jsx)("br",{}),o]})}function T(){var e,t,n,a,C,E,A=(0,u.useState)([]),L=(0,r.Z)(A,2),z=L[0],T=L[1],_=(0,u.useState)([]),q=(0,r.Z)(_,2),B=q[0],U=q[1],O=(0,u.useRef)(null),G=(0,u.useContext)(Z.V),W=G.myAxios,V=G.user,H=(0,u.useState)([]),K=(0,r.Z)(H,2),Y=K[0],X=K[1],J=(0,u.useReducer)(F,R),Q=(0,r.Z)(J,2),$=Q[0],ee=Q[1],te=(0,u.useRef)(null),ne=(0,D.useQuery)({queryKey:"load-pn_no",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.get("/task/accounting/pullout/reqeust/load-pnno",{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){U(e.data.data)},refetchOnWindowFocus:!1}),oe=ne.isLoading,ie=(0,D.useMutation)({mutationKey:"load-checks",mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("/task/accounting/pullout/reqeust/load-checks",t,{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;X(t.data.data);var n=t.data.data.filter((function(e){return"PENDING"===e.Status})).map((function(e){return e.temp_id}));te.current.setSelectedRows(n)}}),re=ie.isLoading,ae=ie.mutate,le=(0,D.useMutation)({mutationKey:"load-rcpn",mutationFn:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("/task/accounting/pullout/reqeust/load-rcpn",t,{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){T(null===e||void 0===e?void 0:e.data.data)}}),ue=le.isLoading,se=le.mutate,de=(0,D.useQuery)({queryKey:"pullout-request-id",queryFn:function(){return(a=a||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.get("/task/accounting/pullout/reqeust/get-id",{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;"UCSMI"!==(null===V||void 0===V?void 0:V.department)&&"edit"!==$.requestMode&&ee({type:"UPDATE_FIELD",field:"RCPNo",value:t.data.id[0].pullout_request})}}),ce=de.isLoading,pe=de.refetch,fe=(0,D.useMutation)({mutationKey:"save-request",mutationFn:function(e){return(C=C||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.post("/task/accounting/pullout/request/save",t,{headers:{Authorization:"Bearer ".concat(null===V||void 0===V?void 0:V.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return e.data.success?(ge(),S().fire({position:"center",icon:"success",title:e.data.message,timer:1500})):S().fire({position:"center",icon:"warning",title:e.data.message,timer:1500})}}),he=fe.mutate,ve=fe.isLoading,xe=function(e){var t=e.target,n=t.name,o=t.value;ee({type:"UPDATE_FIELD",field:n,value:o})},me=function(){S().fire({title:"Are you sure?",text:"You want to save it",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(e){if(e.isConfirmed){if(te.current.getSelectedRows().length<=0)return S().fire({position:"center",icon:"warning",title:"Please select from list",timer:3e3});var t=te.current.getSelectedRows();"edit"===$.requestMode&&(t=te.current.getSelectedRows().map((function(e){return e.Status="--",e}))),he((0,l.Z)((0,l.Z)({},$),{},{selected:JSON.stringify(t)}))}}))};function ge(){var e;null===(e=te.current)||void 0===e||e.removeSelection(),X([]),Object.entries(R).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1];ee({type:"UPDATE_FIELD",field:n,value:o})})),pe()}return(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,M.jsxs)("div",{style:{height:"70px",display:"flex",columnGap:"20px",alignItems:"center"},children:[(0,M.jsx)("div",{style:{display:"flex",flexDirection:"edit"===$.requestMode?"column":"row",columnGap:"10px"},children:(0,M.jsxs)("div",{style:{display:"flex",flexGrow:1,columnGap:"10px"},children:["edit"!==$.requestMode&&(0,M.jsx)(u.Fragment,{children:ce?(0,M.jsx)(P.Z,{loading:ce}):(0,M.jsxs)(s.Z,{variant:"outlined",size:"small",disabled:"add"!==$.requestMode,sx:{width:"200px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,M.jsx)(d.Z,{htmlFor:"pullout-req-id",children:"RCP NO."}),(0,M.jsx)(c.Z,{sx:{height:"27px",fontSize:"14px"},disabled:"add"!==$.requestMode,fullWidth:!0,label:"RCP NO.",name:"RCPNo",value:$.RCPNo,onChange:xe,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),me()},readOnly:"UCSMI"!==(null===V||void 0===V?void 0:V.department),id:"pullout-req-id",endAdornment:(0,M.jsx)(p.Z,{position:"end",children:(0,M.jsx)(f.Z,{disabled:"add"!==$.requestMode,color:"secondary",edge:"end",onClick:function(){pe()},children:(0,M.jsx)(k.Z,{})})})})]})}),"edit"===$.requestMode&&(0,M.jsx)(h.Z,{loading:ue,freeSolo:!0,options:z,value:$.RCPNo,onChange:function(e,t){t&&(ee({type:"UPDATE_FIELD",field:"RCPNo",value:t.RCPNo}),ee({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),ee({type:"UPDATE_FIELD",field:"client",value:t.Name}),ee({type:"UPDATE_FIELD",field:"reason",value:t.Reason}),ae({PNNo:t.PNo}))},onInput:function(e){ee({type:"UPDATE_FIELD",field:"RCPNo",value:e.target.value})},onBlur:function(e){var t=z.find((function(e){return e.RCPNo===$.RCPNo}));void 0!==t&&(ee({type:"UPDATE_FIELD",field:"RCPNo",value:t.RCPNo}),ee({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),ee({type:"UPDATE_FIELD",field:"client",value:t.Name}),ee({type:"UPDATE_FIELD",field:"reason",value:t.Reason}),ae({PNNo:t.PNo}))},renderOption:function(e,t){return(0,u.createElement)("li",(0,l.Z)((0,l.Z)({},e),{},{key:t.RCPNo}),t.RCPNo)},renderInput:function(e){return(0,M.jsx)(v.Z,(0,l.Z)((0,l.Z)({},e),{},{InputProps:(0,l.Z)((0,l.Z)({},e.InputProps),{},{style:{height:"27px",fontSize:"14px"}}),label:"PN No."}))},sx:{width:"200px",".MuiFormLabel-root":{fontSize:"14px"},".MuiInputBase-input":{width:"100% !important"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},".MuiAutocomplete-input ":{position:"absolute"}},size:"small"}),(0,M.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,M.jsx)(h.Z,{loading:oe,disabled:"add"!==$.requestMode,freeSolo:!0,options:B.map((function(e){return e.PNo})),value:$.PNNo,onChange:function(e,t){t&&ee({type:"UPDATE_FIELD",field:"PNNo",value:t})},onInput:function(e){ee({type:"UPDATE_FIELD",field:"PNNo",value:e.target.value})},onBlur:function(e){var t=B.find((function(e){return e.PNo===$.PNNo}));void 0!==t&&(ee({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),ee({type:"UPDATE_FIELD",field:"client",value:t.Name}))},renderInput:function(e){return(0,M.jsx)(v.Z,(0,l.Z)((0,l.Z)({},e),{},{InputProps:(0,l.Z)((0,l.Z)({},e.InputProps),{},{style:{height:"27px",fontSize:"14px"}}),label:"PN No.",disabled:"add"!==$.requestMode}))},sx:{width:"300px",".MuiFormLabel-root":{fontSize:"14px"},".MuiInputBase-input":{width:"100% !important"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},".MuiAutocomplete-input ":{position:"absolute"}},size:"small"}),(0,M.jsx)(h.Z,{loading:oe,disabled:"add"!==$.requestMode,freeSolo:!0,options:B,value:$.client,onChange:function(e,t){t&&ee({type:"UPDATE_FIELD",field:"client",value:t.Name})},onInput:function(e){ee({type:"UPDATE_FIELD",field:"client",value:e.target.value})},onBlur:function(e){var t=B.find((function(e){return e.Name===$.client}));void 0!==t&&(ee({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),ee({type:"UPDATE_FIELD",field:"client",value:t.Name}))},renderOption:function(e,t){return(0,u.createElement)("li",(0,l.Z)((0,l.Z)({},e),{},{key:t.PNo}),t.Name)},renderInput:function(e){return(0,M.jsx)(v.Z,(0,l.Z)((0,l.Z)({},e),{},{InputProps:(0,l.Z)((0,l.Z)({},e.InputProps),{},{style:{height:"27px",fontSize:"14px"}}),fullWidth:!0,label:"Name",disabled:"add"!==$.requestMode}))},sx:{width:"300px",".MuiFormLabel-root":{fontSize:"14px"},".MuiInputBase-input":{width:"100% !important"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},".MuiAutocomplete-input ":{position:"absolute"}},size:"small"})]}),(0,M.jsxs)(s.Z,{size:"small",variant:"outlined",disabled:"add"!==$.requestMode&&"edit"!==$.requestMode,sx:{width:"250px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,M.jsx)(d.Z,{id:"reason",children:"Reason"}),(0,M.jsx)(x.Z,{labelId:"reason",value:$.reason,name:"reason",onChange:function(e){ae({PNNo:$.PNNo}),xe(e)},autoWidth:!0,sx:{height:"27px",fontSize:"14px"},children:I.map((function(e,t){return(0,M.jsx)(m.Z,{value:e,children:e},t)}))})]})]})}),(0,M.jsxs)("div",{style:{display:"flex",columnGap:"10px",paddingBottom:"5px"},children:[""===$.requestMode&&(0,M.jsx)(g.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,M.jsx)(w.Z,{sx:{width:15,height:15}}),id:"entry-header-save-button",onClick:function(){xe({target:{value:"add",name:"requestMode"}})},color:"primary",children:"New"}),""===$.requestMode&&(0,M.jsx)(P.Z,{sx:{height:"30px",fontSize:"11px"},onClick:function(){xe({target:{value:"edit",name:"requestMode"}}),xe({target:{value:"",name:"RCPNo"}}),se({})},color:"secondary",variant:"contained",children:"Edit"}),""!==$.requestMode&&(0,M.jsx)(P.Z,{sx:{height:"30px",fontSize:"11px"},disabled:""===$.requestMode,onClick:me,color:"success",variant:"contained",loading:ve,children:"Save"}),""!==$.requestMode&&(0,M.jsx)(P.Z,{sx:{height:"30px",fontSize:"11px"},variant:"contained",startIcon:(0,M.jsx)(y.Z,{sx:{width:15,height:15}}),color:"error",onClick:function(){S().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&ge()}))},children:"Cancel"})]})]}),(0,M.jsx)("div",{ref:O,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,M.jsx)(N.Z,{style:{height:"".concat(null===(E=O.current)||void 0===E?void 0:E.getBoundingClientRect().height,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,M.jsx)(b.Z,{ref:te,isLoading:re,columns:j,rows:Y,table_id:"temp_id",isSingleSelection:!1,isRowFreeze:!1,isRowSelectable:function(e){return"edit"===$.requestMode?!["APPROVED","DISAPPROVED"].includes(e.row.Status):"add"!==$.requestMode||!["PENDING","APPROVED","DISAPPROVED"].includes(e.row.Status)},getCellClassName:function(e){return"Status"===e.field&&"APPROVED"===e.value?"approved":"Status"===e.field&&"PENDING"===e.value?"pending":"Status"===e.field&&"DISAPPROVED"===e.value?"disapproved":""}})})})]})}function _(){var e,t,n,a,s=(0,u.useState)([]),d=(0,r.Z)(s,2),c=d[0],p=d[1],f=(0,u.useRef)(null),x=(0,u.useContext)(Z.V),m=x.myAxios,g=x.user,w=(0,u.useState)([]),y=(0,r.Z)(w,2),C=y[0],E=y[1],k=(0,u.useReducer)(F,A),I=(0,r.Z)(k,2),R=I[0],j=I[1],z=(0,u.useRef)(null),T=(0,D.useMutation)({mutationKey:"load-checks",mutationFn:function(t){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.post("/task/accounting/pullout/reqeust/load-checks",t,{headers:{Authorization:"Bearer ".concat(null===g||void 0===g?void 0:g.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){var t=e;E(t.data.data);var n=t.data.data.filter((function(e){return"PENDING"===e.Status})).map((function(e){return e.temp_id}));z.current.setSelectedRows(n)}}),_=T.isLoading,q=T.mutate,B=(0,D.useQuery)({queryKey:"load-rcpn",queryFn:function(){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/task/accounting/pullout/reqeust/load-rcpn",{headers:{Authorization:"Bearer ".concat(null===g||void 0===g?void 0:g.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){p(null===e||void 0===e?void 0:e.data.data)}}),U=B.isLoading,O=(0,D.useMutation)({mutationKey:"approved",mutationFn:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.post("/task/accounting/pullout/approved/approved",t,{headers:{Authorization:"Bearer ".concat(null===g||void 0===g?void 0:g.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return e.data.success?(function(){var e;null===(e=z.current)||void 0===e||e.removeSelection(),E([]),Object.entries(A).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1];j({type:"UPDATE_FIELD",field:n,value:o})}))}(),S().fire({position:"center",icon:"success",title:e.data.message,timer:1500})):S().fire({position:"center",icon:"warning",title:e.data.message,timer:1500})}}),G=O.mutate,W=O.isLoading;var V=function(e){var t=e.target,n=t.name,o=t.value;j({type:"UPDATE_FIELD",field:n,value:o})};return(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",flex:1},children:[(0,M.jsx)("div",{style:{height:"auto",display:"flex",columnGap:"20px",marginBottom:"10px"},children:(0,M.jsxs)("div",{style:{display:"flex",flexGrow:1,columnGap:"10px"},children:[(0,M.jsx)(h.Z,{loading:U,freeSolo:!0,options:c,value:R.RCPNo,onChange:function(e,t){t&&(j({type:"UPDATE_FIELD",field:"RCPNo",value:t.RCPNo}),j({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),j({type:"UPDATE_FIELD",field:"client",value:t.Name}),j({type:"UPDATE_FIELD",field:"reason",value:t.Reason}),q({PNNo:t.PNo}))},onInput:function(e){j({type:"UPDATE_FIELD",field:"RCPNo",value:e.target.value})},onBlur:function(e){var t=c.find((function(e){return e.RCPNo===R.RCPNo}));void 0!==t&&(j({type:"UPDATE_FIELD",field:"RCPNo",value:t.RCPNo}),j({type:"UPDATE_FIELD",field:"PNNo",value:t.PNo}),j({type:"UPDATE_FIELD",field:"client",value:t.Name}),j({type:"UPDATE_FIELD",field:"reason",value:t.Reason}),q({PNNo:t.PNo}))},renderOption:function(e,t){return(0,u.createElement)("li",(0,l.Z)((0,l.Z)({},e),{},{key:t.RCPNo}),t.RCPNo)},renderInput:function(e){return(0,M.jsx)(v.Z,(0,l.Z)((0,l.Z)({},e),{},{InputProps:(0,l.Z)((0,l.Z)({},e.InputProps),{},{style:{height:"27px",fontSize:"14px"}}),label:"PN No."}))},sx:{flex:1,".MuiFormLabel-root":{fontSize:"14px"},".MuiInputBase-input":{width:"100% !important"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"},".MuiAutocomplete-input ":{position:"absolute"}},size:"small"}),(0,M.jsx)(v.Z,{fullWidth:!0,variant:"outlined",size:"small",label:"PN No.",name:"PNNo",value:R.PNNo,onChange:V,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{width:"200px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,M.jsx)(v.Z,{fullWidth:!0,variant:"outlined",size:"small",label:"Name",name:"client",value:R.client,onChange:V,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,M.jsx)(v.Z,{label:"Reason",value:R.reason,name:"reason",onChange:V,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-12px"}}}),(0,M.jsx)(P.Z,{sx:{height:"30px",fontSize:"11px"},disabled:R.RCPNo.length<=0,loading:"approved"===R.approvedMode&&W,onClick:function(){var e;S().fire({title:"Are you sure?",html:'<p>You want to <span style="color:green">Approved</span> <strong>'.concat(R.RCPNo,"</strong></p><p>Enter Code.</p>"),input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(t){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=JSON.stringify(z.current.getSelectedRows()),G((0,l.Z)((0,l.Z)({},R),{},{code:t,selected:n,approvedMode:"approved"})),j({type:"UPDATE_FIELD",field:"approvedMode",value:"approved"})}catch(o){S().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},allowOutsideClick:function(){return!S().isLoading()}}).then((function(e){e.isDismissed||e.dismiss||e.isDenied}))},color:"success",variant:"contained",children:"Approved Request"}),(0,M.jsx)(P.Z,{sx:{height:"30px",fontSize:"11px"},disabled:R.RCPNo.length<=0,loading:"disapproved"===R.approvedMode&&W,onClick:function(){var e;S().fire({title:"Are you sure!",html:'<p>You want to <span style="color:red">Disaprroved</span> <strong>'.concat(R.RCPNo,"</strong></p><p>Enter Code.</p>"),input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",confirmButtonColor:"red",showLoaderOnConfirm:!0,preConfirm:function(t){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=JSON.stringify(z.current.getSelectedRows()),G((0,l.Z)((0,l.Z)({},R),{},{code:t,selected:n,approvedMode:"disapproved"})),j({type:"UPDATE_FIELD",field:"approvedMode",value:"disapproved"})}catch(o){S().showValidationMessage("\n            Request failed: ".concat(o,"\n          "))}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},allowOutsideClick:function(){return!S().isLoading()}}).then((function(e){e.isDismissed||e.dismiss||e.isDenied}))},color:"error",variant:"contained",children:"Disapproved Request"})]})}),(0,M.jsx)("div",{ref:f,style:{marginTop:"10px",width:"100%",position:"relative",flex:1},children:(0,M.jsx)(N.Z,{style:{height:"".concat(null===(a=f.current)||void 0===a?void 0:a.getBoundingClientRect().height,"px"),width:"100%",overflowX:"scroll",position:"absolute"},children:(0,M.jsx)(b.Z,{ref:z,isLoading:W||_,columns:L,rows:C,table_id:"temp_id",isSingleSelection:!1,isRowFreeze:!1,isRowSelectable:function(e){return!["PENDING","APPROVED","DISAPPROVED"].includes(e.row.Status)},getCellClassName:function(e){return"Status"===e.field&&"APPROVED"===e.value?"approved":"Status"===e.field&&"PENDING"===e.value?"pending":"Status"===e.field&&"DISAPPROVED"===e.value?"disapproved":""}})})})]})}function q(e,t){return e===t?"translateX(100%)":"translateX(0%)"}},25756:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(29439),i=n(72791);function r(e){var t=(0,i.useState)(0),n=(0,o.Z)(t,2),r=n[0],a=n[1];return{step:e[r],goTo:function(e){a(e)},back:function(){a((function(e){return e<=0?e:e+1}))},next:function(){a((function(t){return t>=e.length-1?t:t+1}))},isFirstStep:0!==r,isLastStep:r===e.length-1,currentStepIndex:r}}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},86753:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),r=n(80184),a=(0,i.default)((0,r.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt");t.Z=a}}]);
//# sourceMappingURL=4951.8c0c2a56.chunk.js.map