"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[4334,793],{77387:function(e,t,n){n.r(t),n.d(t,{MarineContext:function(){return B},default:function(){return J}});var o=n(74165),i=n(15861),a=n(29439),l=n(4942),r=n(1413),s=n(72791),d=n(36151),u=n(64554),c=n(48550),p=n(4378),x=n(42419),f=n(3380),m=n(91933),h=n(29823),v=n(53329),y=n(21830),g=n.n(y),b=n(27247),w=n(68096),D=n(94925),Z=n(58406),_=n(23786),F=n(93263),z=n(39709),j=n(98333),P=n(51760),S=n(25756),C=n(77196),M=n(63466),I=n(13400),A=n(91421),k=n(13784),L=n(75105),T=n(80184);function E(){var e,t,n=(0,s.useContext)(B),a=n.state,l=n.handleInputChange,r=n.customInputchange,d=n.isAddOrEditMode,u=n.myAxios,p=n.user,x=n.keySave,f=(0,s.useRef)(null),h=(0,s.useRef)(null),v=(0,F.Z)({link:{url:"/task/production/get-clients",queryUrlName:"clientSearch"},columns:[{field:"entry_client_id",headerName:"ID",width:130},{field:"fullname",headerName:"First Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}],queryKey:"get-clients",uniqueId:"entry_client_id",responseDataKey:"clients",onSelected:function(e){r(e[0].entry_client_id,"client_id"),r(e[0].fullname,"client_name"),r(e[0].address,"client_address"),r(e[0].sale_officer,"sale_officer"),j()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(r(e.row.entry_client_id,"client_id"),r(e.row.fullname,"client_name"),r(e.row.address,"client_address"),r(e.row.sale_officer,"sale_officer"),j())},searchRef:f}),y=v.ModalComponent,g=v.openModal,b=v.isLoading,j=v.closeModal,P=(0,F.Z)({link:{url:"/task/production/get-agents",queryUrlName:"agentSearch"},columns:[{field:"entry_agent_id",headerName:"ID",width:130},{field:"fullname",headerName:"First Name",flex:1},{field:"entry_type",headerName:"ID Type",width:150}],queryKey:"get-agents",uniqueId:"entry_agent_id",responseDataKey:"agents",onSelected:function(e){r(e[0].entry_agent_id,"agent_id"),r(e[0].fullname,"agent_name"),G()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(r(e.row.entry_agent_id,"agent_id"),r(e.row.fullname,"agent_name"),G())},searchRef:h}),S=P.ModalComponent,E=P.openModal,N=P.isLoading,G=P.closeModal,K=(0,m.useQuery)({queryKey:"bond-policy-account-ss",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("/task/production/policy-accounts-by-line?Line=Marine",{headers:{Authorization:"Bearer ".concat(null===p||void 0===p?void 0:p.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),R=K.data,V=K.isLoading,q=(0,s.useRef)(null),U=(0,s.useRef)(null),O=(0,s.useRef)(null);return(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,T.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,T.jsxs)("fieldset",{style:{flex:1,display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,T.jsx)("legend",{style:{color:"#065f46"},children:"Insurer Information"}),(0,T.jsxs)("div",{style:{display:"flex",gap:"10px",flexDirection:"column"},children:[b?(0,T.jsx)(z.Z,{loading:b}):(0,T.jsxs)(w.Z,{variant:"outlined",size:"small",disabled:d,sx:{width:"170px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,T.jsx)(D.Z,{htmlFor:"client-id-field",children:"Client ID"}),(0,T.jsx)(C.Z,{sx:{height:"27px",fontSize:"14px"},disabled:d,fullWidth:!0,label:"Client ID",name:"client_id",value:a.client_id,onChange:l,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),g(a.client_id)},id:"client-id-field",endAdornment:(0,T.jsx)(M.Z,{position:"end",children:(0,T.jsx)(I.Z,{disabled:d,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){g(a.client_id)},children:(0,T.jsx)(A.Z,{})})})})]}),(0,T.jsx)(c.Z,{disabled:d,fullWidth:!0,variant:"outlined",size:"small",label:"Client Name",name:"client_name",value:a.client_name,onChange:l,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onKeyDown:x})]}),(0,T.jsx)(c.Z,{rows:5,disabled:d,fullWidth:!0,variant:"outlined",size:"small",label:"Client Address",multiline:!0,name:"client_address",value:a.client_address,onChange:l,onKeyDown:x,InputProps:{style:{height:"100px",fontSize:"14px"},readOnly:!0},sx:{flex:1,height:"100px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})}),(0,T.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,T.jsxs)("fieldset",{style:{flexDirection:"row",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flex:1,flexWrap:"wrap"},children:[(0,T.jsx)("legend",{style:{color:"#065f46"},children:"Agent Information"}),N?(0,T.jsx)(z.Z,{loading:N}):(0,T.jsxs)(w.Z,{variant:"outlined",size:"small",disabled:d,sx:{width:"170px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,T.jsx)(D.Z,{htmlFor:"AGENT-id-field",children:"Agent ID"}),(0,T.jsx)(C.Z,{sx:{height:"27px",fontSize:"14px"},disabled:d,label:"Agent ID",name:"agent_id",value:a.agent_id,onChange:l,onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)return e.preventDefault(),E(a.agent_id)},id:"AGENT-id-field",endAdornment:(0,T.jsx)(M.Z,{position:"end",children:(0,T.jsx)(I.Z,{disabled:d,"aria-label":"search-client",color:"secondary",edge:"end",onClick:function(){E(a.agent_id)},children:(0,T.jsx)(A.Z,{})})})})]}),(0,T.jsx)(c.Z,{fullWidth:!0,onKeyDown:x,disabled:d,variant:"outlined",size:"small",label:"Agent Name",name:"agent_name",value:a.agent_name,onChange:l,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{marginTop:"10px",flex:1,height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,T.jsx)(c.Z,{onKeyDown:x,disabled:d,fullWidth:!0,variant:"outlined",size:"small",label:"Sale Officer",multiline:!0,name:"sale_officer",value:a.sale_officer,onChange:l,InputProps:{style:{height:"27px",fontSize:"14px"},readOnly:!0},sx:{marginTop:"10px",width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})})]}),(0,T.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,T.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box",height:"150px"},children:(0,T.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px",flexGrow:1},children:[(0,T.jsx)("legend",{style:{color:"#065f46"},children:"Marine Policy"}),(0,T.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[V?(0,T.jsx)(z.Z,{loading:V}):(0,T.jsxs)(w.Z,{size:"small",disabled:d,sx:{width:"100%",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},children:[(0,T.jsx)(D.Z,{id:"PolicyAccount",children:"Account"}),(0,T.jsx)(Z.Z,{labelId:"PolicyAccount",value:a.PolicyAccount,label:"Account",name:"PolicyAccount",onChange:l,sx:{height:"27px",fontSize:"14px"},children:null===(t=R.data)||void 0===t?void 0:t.policyAccounts.map((function(e,t){return(0,T.jsx)(_.Z,{value:e.Account,children:e.Account},t)}))})]}),(0,T.jsx)(c.Z,{disabled:d||"delete"===a.marineActioMode,fullWidth:!0,variant:"outlined",size:"small",label:"Policy No",name:"PolicyNo",value:a.PolicyNo,onChange:l,onKeyDown:x,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]}),(0,T.jsx)(c.Z,{disabled:d,variant:"outlined",size:"small",label:"Location",name:"location",value:a.location,onChange:l,onKeyDown:x,multiline:!0,rows:2,InputProps:{style:{height:"auto",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})}),(0,T.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,T.jsxs)("fieldset",{style:{display:"flex",flexDirection:"row",gap:"10px",gridArea:"content4",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,T.jsx)("legend",{style:{color:"#065f46"},children:"Period of Insurance"}),(0,T.jsx)(k.Z,{disabled:d,label:"Date From",onChange:function(e){r(e,"DateFrom");var t=new Date(e),n=(0,L.Z)(t,1);r(n,"DateTo")},value:new Date(a.DateFrom),textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=q.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:q}),(0,T.jsx)(k.Z,{disabled:d,label:"Date To",onChange:function(e){r(e,"DateTo")},value:new Date(a.DateTo),textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=U.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},datePickerRef:U}),(0,T.jsx)(k.Z,{label:"Date Issued",name:"DateIssued",onChange:function(e){r(e,"DateIssued")},textField:{InputLabelProps:{style:{fontSize:"14px"}},InputProps:{style:{height:"27px",fontSize:"14px"}}},onKeyDown:function(e){if("Enter"===e.code||"NumpadEnter"===e.code)var t=setTimeout((function(){var e,n;null===(e=O.current)||void 0===e||null===(n=e.querySelector("button"))||void 0===n||n.click(),clearTimeout(t)}),150)},value:new Date(a.DateIssued),disabled:d,datePickerRef:O})]})})]}),(0,T.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,T.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"},children:(0,T.jsxs)("fieldset",{style:{flexGrow:1,border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,T.jsx)("legend",{style:{height:"22px"}}),(0,T.jsxs)("div",{style:{display:"grid",gap:"10px",gridTemplateColumns:"repeat(2,1fr)"},children:[(0,T.jsx)(c.Z,{disabled:d,fullWidth:!0,variant:"outlined",size:"small",label:"Consignee",name:"consignee",value:a.consignee,onChange:l,onKeyDown:x,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,T.jsx)(c.Z,{disabled:d,fullWidth:!0,variant:"outlined",size:"small",label:"Subject Matter Insured",name:"smi",value:a.smi,onChange:l,onKeyDown:x,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,T.jsx)(c.Z,{disabled:d,fullWidth:!0,variant:"outlined",size:"small",label:"Vessel",name:"vessel",value:a.vessel,onChange:l,onKeyDown:x,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,T.jsx)(c.Z,{disabled:d,fullWidth:!0,variant:"outlined",size:"small",label:"Additional Information",name:"add_info",value:a.add_info,onChange:l,onKeyDown:x,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,T.jsx)(c.Z,{disabled:d,fullWidth:!0,variant:"outlined",size:"small",label:"Point of Origin",name:"point_orig",value:a.point_orig,onChange:l,onKeyDown:x,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),(0,T.jsx)(c.Z,{disabled:d,fullWidth:!0,variant:"outlined",size:"small",label:"Point off Destination",name:"point_dis",value:a.point_dis,onChange:l,onKeyDown:x,InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"100%",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}})]})]})}),(0,T.jsx)("div",{style:{display:"flex",columnGap:"10px",flex:1,boxSizing:"border-box"}})]}),y,S]})}var N=n(94721),G=n(56580);function K(){var e=(0,s.useContext)(B),t=e.state,n=e.handleInputChange,o=e.computation,i=e.isAddOrEditMode,a=e.dispatch,l=e.keySave;function r(e){"NumpadEnter"!==e.code&&"Enter"!==e.code||o()}return(0,T.jsxs)("div",{style:{display:"flex"},children:[(0,T.jsx)("div",{style:{display:"flex",columnGap:"10px",flexDirection:"column"},children:(0,T.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",rowGap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,T.jsx)("legend",{children:"Clauses, Endorsements, Special Conditions and Warranties"}),(0,T.jsx)(c.Z,{disabled:i,required:!0,variant:"outlined",size:"small",name:"prem_text_one",value:t.prem_text_one,multiline:!0,rows:5,onChange:n,onKeyDown:l}),(0,T.jsx)(c.Z,{disabled:i,required:!0,variant:"outlined",size:"small",name:"prem_text_two",value:t.prem_text_two,multiline:!0,rows:5,onChange:n,onKeyDown:l})]})}),(0,T.jsxs)("fieldset",{style:{display:"flex",flexDirection:"column",rowGap:"10px",padding:"15px",border:"1px solid #cbd5e1",borderRadius:"5px"},children:[(0,T.jsx)("legend",{children:"Premiums"}),(0,T.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",padding:"5px"},children:(0,T.jsx)(d.Z,{disabled:i,size:"small",variant:"contained",color:"primary",onClick:function(){o()},children:"Compute"})}),(0,T.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2,1fr)",gap:"10px"},children:[(0,T.jsx)(c.Z,{disabled:i,required:!0,variant:"outlined",size:"small",label:"Insured Value",name:"insuredValue",value:t.insuredValue,onChange:n,onKeyDown:r,placeholder:"0.00",InputProps:{inputComponent:G.a,style:{height:"27px",fontSize:"14px"}},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){a({type:"UPDATE_FIELD",field:"insuredValue",value:parseFloat(t.insuredValue).toFixed(2)})}}),(0,T.jsx)(c.Z,{disabled:i,required:!0,variant:"outlined",size:"small",label:"Percentage",name:"percentagePremium",value:t.percentagePremium,onChange:n,onKeyDown:r,placeholder:"0.00",InputProps:{inputComponent:G.a,style:{height:"27px",fontSize:"14px"}},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){a({type:"UPDATE_FIELD",field:"percentagePremium",value:parseFloat(t.percentagePremium).toFixed(2)})}}),(0,T.jsx)(c.Z,{disabled:i,required:!0,variant:"outlined",size:"small",label:"Total Premium",name:"totalPremium",value:t.totalPremium,onChange:n,onKeyDown:r,placeholder:"0.00",InputProps:{inputComponent:G.a,style:{height:"27px",fontSize:"14px"}},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){a({type:"UPDATE_FIELD",field:"totalPremium",value:parseFloat(t.totalPremium).toFixed(2)})}}),(0,T.jsx)(c.Z,{disabled:i,required:!0,variant:"outlined",size:"small",label:"Vat",name:"vat",value:t.vat,onChange:n,onKeyDown:r,placeholder:"0.00",InputProps:{inputComponent:G.a,style:{height:"27px",fontSize:"14px"}},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){a({type:"UPDATE_FIELD",field:"vat",value:parseFloat(t.vat).toFixed(2)})}}),(0,T.jsx)(c.Z,{disabled:i,required:!0,variant:"outlined",size:"small",label:"Doc Stamp",name:"docStamp",value:t.docStamp,onChange:n,onKeyDown:r,placeholder:"0.00",InputProps:{inputComponent:G.a,style:{height:"27px",fontSize:"14px"}},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){a({type:"UPDATE_FIELD",field:"docStamp",value:parseFloat(t.docStamp).toFixed(2)})}}),(0,T.jsxs)("div",{style:{display:"flex",gap:"5px",position:"relative"},children:[(0,T.jsx)(c.Z,{disabled:i,required:!0,variant:"outlined",size:"small",name:"localGovTaxPercent",value:t.localGovTaxPercent,onChange:n,onKeyDown:r,placeholder:"0.00",InputProps:{inputComponent:G.a,style:{height:"27px",fontSize:"14px"}},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){a({type:"UPDATE_FIELD",field:"localGovTaxPercent",value:parseFloat(t.localGovTaxPercent).toFixed(2)})}}),(0,T.jsx)(c.Z,{disabled:i,required:!0,variant:"outlined",size:"small",label:"Local Gov Tax",name:"localGovTax",value:t.localGovTax,onChange:n,onKeyDown:r,placeholder:"0.00",InputProps:{inputComponent:G.a,style:{height:"27px",fontSize:"14px"}},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){a({type:"UPDATE_FIELD",field:"localGovTax",value:parseFloat(t.localGovTax).toFixed(2)})}})]})]}),(0,T.jsx)(N.Z,{color:"secondary"}),(0,T.jsx)(c.Z,{disabled:i,required:!0,variant:"outlined",size:"small",label:"Total Due",name:"totalDue",value:t.totalDue,onChange:n,placeholder:"0.00",InputProps:{inputComponent:G.a,style:{height:"27px",fontSize:"14px"}},sx:{height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}},onBlur:function(){a({type:"UPDATE_FIELD",field:"totalDue",value:parseFloat(t.totalDue).toFixed(2)})}})]})]})}var R=n(64230),V={form_action:"REG",form_type:"COM",sub_account:"HO",client_id:"",client_name:"",client_address:"",agent_id:"",agent_name:"",agent_com:"0.00",sale_officer:"",PolicyAccount:"",PolicyNo:"",location:"",DateFrom:new Date,DateTo:(0,L.Z)(new Date,1),DateIssued:new Date,consignee:"",smi:"",vessel:"",add_info:"",point_orig:"",point_dis:"",prem_text_one:"",prem_text_two:"",insuredValue:"",percentagePremium:"",totalPremium:"",vat:"",docStamp:"",localGovTaxPercent:"0.75",localGovTax:"",totalDue:"",marineActioMode:""},q=function(e,t){return"UPDATE_FIELD"===t.type?(0,r.Z)((0,r.Z)({},e),{},(0,l.Z)({},t.field,t.value)):e},B=(0,s.createContext)({}),U="marine-search",O="clients",W="agents",H="marine-policy",Q="marine-policy",Y="marine-policy";function J(){var e,t,n,y,C,M,I=(0,S.Z)([(0,T.jsx)(E,{}),(0,T.jsx)(K,{})]),A=I.step,k=I.goTo,L=I.currentStepIndex,N=(0,s.useReducer)(q,V),G=(0,a.Z)(N,2),J=G[0],X=G[1],$=(0,s.useContext)(f.V),ee=$.myAxios,te=$.user,ne=(0,s.useState)(""),oe=(0,a.Z)(ne,2),ie=oe[0],ae=oe[1],le=(0,s.useState)(!1),re=(0,a.Z)(le,2),se=re[0],de=re[1],ue=(0,s.useState)({thirdparty:"tpl"===J.form_type.toLowerCase(),compre:"com"===J.form_type.toLowerCase()}),ce=(0,a.Z)(ue,2),pe=ce[0],xe=ce[1],fe=(0,m.useQueryClient)(),me=""===J.marineActioMode,he=(0,s.useRef)(null),ve=(0,s.useRef)(null),ye=(0,s.useRef)(null),ge=(0,s.useRef)(null),be=(0,m.useQuery)({queryKey:"get-sub_account",queryFn:function(){return(e=e||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.get("/task/production/get-sub_account",{headers:{Authorization:"Bearer ".concat(null===te||void 0===te?void 0:te.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),we=be.data,De=be.isLoading,Ze=(0,F.Z)({link:{url:"/task/production/search-marine-policy",queryUrlName:"searchMarinePolicy"},columns:[{field:"_DateIssued",headerName:"Date",width:200},{field:"PolicyNo",headerName:"Policy No",width:250},{field:"Account",headerName:"Account",width:170},{field:"client_fullname",headerName:"Full Name",flex:1}],queryKey:"search-marine-policy",uniqueId:"PolicyNo",responseDataKey:"marinePolicy",onSelected:function(e){Re(e),je()},onCellKeyDown:function(e,t){"Enter"!==t.code&&"NumpadEnter"!==t.code||(Re([e.row]),je())},searchRef:ge}),_e=Ze.ModalComponent,Fe=Ze.openModal,ze=Ze.isLoading,je=Ze.closeModal,Pe=(0,m.useMutation)({mutationKey:Q,mutationFn:function(e){return(t=t||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==J.marineActioMode){e.next=4;break}return e.next=3,ee.post("/task/production/update-marine-policy",t,{headers:{Authorization:"Bearer ".concat(null===te||void 0===te?void 0:te.accessToken)}});case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,ee.post("/task/production/add-marine-policy",t,{headers:{Authorization:"Bearer ".concat(null===te||void 0===te?void 0:te.accessToken)}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(n=n||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.success){e.next=5;break}return e.next=3,Ke();case 3:return Ge(V,!0),e.abrupt("return",g().fire({position:"center",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500}));case 5:g().fire({position:"center",icon:"error",title:t.data.message,showConfirmButton:!1,timer:1500});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Se=Pe.mutate,Ce=Pe.isLoading,Me=(0,m.useMutation)({mutationKey:Y,mutationFn:function(e){return(y=y||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.post("/task/production/delete-marine-policy",t,{headers:{Authorization:"Bearer ".concat(null===te||void 0===te?void 0:te.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){return(C=C||(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.success){e.next=5;break}return e.next=3,Ke();case 3:return Ge(V,!0),e.abrupt("return",g().fire({position:"center",icon:"success",title:t.data.message,showConfirmButton:!1,timer:1500}));case 5:g().fire({position:"center",icon:"error",title:t.data.message,showConfirmButton:!1,timer:1500});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),Ie=Me.mutate,Ae=Me.isLoading,ke=(0,s.useCallback)((function(){J.insuredValue=""===J.insuredValue?"0":J.insuredValue,J.percentagePremium=""===J.percentagePremium?"0":J.percentagePremium,J.totalPremium=""===J.totalPremium?"0":J.totalPremium,J.vat=""===J.vat?"0":J.vat,J.docStamp=""===J.docStamp?"0":J.docStamp,J.localGovTaxPercent=""===J.localGovTaxPercent?"0":J.localGovTaxPercent,J.localGovTax=""===J.localGovTax?"0":J.localGovTax,J.totalDue=""===J.totalDue?"0":J.totalDue}),[J]),Le=(0,s.useCallback)((function(){return""===J.client_name||null===J.client_name||void 0===J.client_name?g().fire("Unable to save! Invalid Client ID","you missed the Client Id Field?","error"):""===J.client_id||null===J.client_id?g().fire("Unable to save! Invalid IDNo.","you missed the Client Id Field?","error"):""===J.PolicyAccount||null===J.PolicyAccount?g().fire("Unable to save! Please select Account.","you missed the Account Field?","error"):""===J.PolicyNo||null===J.PolicyNo?g().fire("Unable to save! Invalid Policy No.","you missed the Policy No Field?","error"):void("delete"===J.marineActioMode?(0,R.s)({isUpdate:!0,cb:function(e){ke(),Se((0,r.Z)((0,r.Z)({},J),{},{userCodeConfirmation:e}))}}):(0,R.L)({isConfirm:function(){ke(),Se(J)}}))}),[Se,J,ke]);(0,s.useEffect)((function(){var e=function(e){var t,n,o;("AudioVolumeMute"!==e.code&&"F1"!==e.code&&173!==e.keyCode||(e.preventDefault(),k(0)),"AudioVolumeDown"!==e.code&&"F2"!==e.code&&174!==e.keyCode||(e.preventDefault(),k(1)),""!==J.marineActioMode||"KeyN"!==e.code&&"Enter"!==e.code&&"NumpadEnter"!==e.code)||(e.preventDefault(),null===(t=he.current)||void 0===t||t.click());""!==J.marineActioMode&&"Escape"===e.code&&(e.preventDefault(),null===(n=ve.current)||void 0===n||n.click());"delete"===J.marineActioMode&&"Delete"===e.code&&(e.preventDefault(),null===(o=ye.current)||void 0===o||o.click())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[k,Le,J.marineActioMode]);var Te=function(e){var t=e.target,n=t.name,o=t.value;X({type:"UPDATE_FIELD",field:n,value:o})},Ee=function(e,t){X({type:"UPDATE_FIELD",field:t,value:e})};function Ne(){ke();var e=parseFloat(J.insuredValue),t=parseFloat(J.percentagePremium),n=parseFloat(J.localGovTaxPercent)/100,o=e*(t/100);Ee(e.toFixed(2),"insuredValue"),Ee(t.toFixed(2),"percentagePremium"),Ee(o.toFixed(2),"totalPremium"),Ee((.12*o).toFixed(2),"vat"),Ee((.125*o).toFixed(2),"docStamp"),Ee((n*o).toFixed(2),"localGovTax"),Ee((parseFloat(o.toFixed(2))+parseFloat((.12*o).toFixed(2))+parseFloat((.125*o).toFixed(2))+parseFloat((n*o).toFixed(2))).toFixed(2),"totalDue")}function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.form_type=J.form_type,e.form_action=J.form_action,e.prem_text_one=J.prem_text_one,e.prem_text_two=J.prem_text_two,t||(e.marineActioMode=J.marineActioMode),Object.entries(e).forEach((function(e){var t=(0,a.Z)(e,2),n=t[0],o=t[1];Ee(o,n)}))}function Ke(){return(M=M||(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([fe.invalidateQueries(U),fe.invalidateQueries(O),fe.invalidateQueries(W),fe.invalidateQueries(H),fe.invalidateQueries(Q),fe.invalidateQueries(Y)]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e){var t=e[0],n=t.Account,o=t.AdditionalInfo,i=t.AgentCom,a=t.AgentID,l=t.Consignee,r=t.DateFrom,s=t._DateIssued,d=t.DateTo,u=t.IDNo,c=t.InsuredValue,p=t.Location,x=t.Percentage,f=t.PointOfOrigin,m=t.PointofDestination,h=t.PolicyNo,v=t.SubAcct,y=t.SubjectInsured,g=t.Vessel,b=t.address,w=t.agent_fullname,D=t.client_fullname,Z=t.sale_officer;Ee(v,"sub_account"),Ee(u,"client_id"),Ee(D,"client_name"),Ee(b,"client_address"),Ee(a,"agent_id"),Ee(w,"agent_name"),Ee(i,"agent_com"),Ee(Z,"sale_officer"),Ee(n,"PolicyAccount"),Ee(h,"PolicyNo"),Ee(p,"location"),Ee(r,"DateFrom"),Ee(d,"DateTo"),Ee(s,"DateIssued"),Ee(l,"consignee"),Ee(y,"smi"),Ee(g,"vessel"),Ee(o,"add_info"),Ee(f,"point_orig"),Ee(m,"point_dis"),J.insuredValue=c,J.percentagePremium=x,Ne(),Ee("delete","marineActioMode")}return(0,T.jsxs)(B.Provider,{value:{state:J,handleInputChange:Te,customInputchange:Ee,Mortgagee:se,setMortgagee:de,showField:pe,setShowField:xe,myAxios:ee,user:te,computation:Ne,isAddOrEditMode:me,dispatch:X,keySave:function(e){""===J.mode||"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Le())}},children:[(0,T.jsxs)("div",{style:{display:"flex",columnGap:"5px"},children:[(0,T.jsxs)("div",{style:{display:"flex",columnGap:"8px",alignItems:"center"},children:[(0,T.jsx)(P.CustomButton,{onClick:function(){k(0)},currentStepIndex:L,index:0,children:"Policy Information"}),(0,T.jsx)(j.Z,{fontSize:"small"})]}),(0,T.jsx)("div",{style:{display:"flex",columnGap:"8px",alignItems:"center"},children:(0,T.jsx)(P.CustomButton,{onClick:function(){k(1)},currentStepIndex:L,index:1,children:"Policy Premium"})}),(0,T.jsx)("div",{style:{display:"flex",alignItems:"center",columnGap:"20px",marginLeft:"30px"},children:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",columnGap:"5px"},children:[""===J.marineActioMode&&(0,T.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},ref:he,variant:"contained",startIcon:(0,T.jsx)(x.Z,{}),onClick:function(){Ee("add","marineActioMode")},children:"New"}),(0,T.jsx)(z.Z,{loading:Ce,sx:{height:"30px",fontSize:"11px"},color:"primary",variant:"contained",type:"submit",onClick:Le,disabled:""===J.marineActioMode,startIcon:(0,T.jsx)(v.Z,{}),children:"Save"}),""!==J.marineActioMode&&(0,T.jsx)(d.Z,{sx:{height:"30px",fontSize:"11px"},ref:ve,variant:"contained",startIcon:(0,T.jsx)(h.Z,{}),color:"error",onClick:function(){g().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, cancel it!"}).then((function(e){e.isConfirmed&&(Ee("","marineActioMode"),Ge(V,!0))}))},children:"Cancel"}),(0,T.jsx)(z.Z,{loading:Ae,ref:ye,id:"save-entry-header",variant:"contained",sx:{height:"30px",fontSize:"11px",backgroundColor:p.Z[500],"&:hover":{backgroundColor:p.Z[600]}},disabled:"delete"!==J.marineActioMode,startIcon:(0,T.jsx)(b.Z,{}),onClick:function(){(0,R.s)({isUpdate:!1,cb:function(e){Ie({PolicyAccount:J.PolicyAccount,PolicyNo:J.PolicyNo,userCodeConfirmation:e})}})},children:"Delete"})]})})]}),(0,T.jsx)(u.Z,{sx:function(e){return(0,l.Z)({display:"flex",alignItems:"center",columnGap:"20px",marginBottom:"10px"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",flex:1})},children:(0,T.jsx)("div",{style:{marginTop:"10px",marginBottom:"12px",width:"100%"}})}),(0,T.jsxs)("div",{style:{marginBottom:"5px",display:"flex",gap:"10px"},children:[ze?(0,T.jsx)(z.Z,{loading:ze}):(0,T.jsx)(c.Z,{label:"Search",size:"small",name:"search",value:ie,onChange:function(e){ae(e.target.value)},onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),Fe(ie))},InputProps:{style:{height:"27px",fontSize:"14px"}},sx:{width:"300px",height:"27px",".MuiFormLabel-root":{fontSize:"14px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}}),De?(0,T.jsx)(z.Z,{loading:De}):(0,T.jsxs)(w.Z,{size:"small",sx:function(e){return{width:"150px",".MuiFormLabel-root":{fontSize:"14px",background:"white",zIndex:99,padding:"0 3px"},".MuiFormLabel-root[data-shrink=false]":{top:"-5px"}}},children:[(0,T.jsx)(D.Z,{id:"subAccount",children:"Sub Account"}),(0,T.jsx)(Z.Z,{sx:{height:"27px",fontSize:"14px"},size:"small",labelId:"subAccount",label:"subAccount",name:"sub_account",value:J.sub_account,onChange:function(e){Te(e)},children:(null===we||void 0===we?void 0:we.data.sub_account).map((function(e,t){return(0,T.jsx)(_.Z,{value:e.Acronym.trim(),children:e.Acronym},t)}))})]})]}),A,_e]})}},42419:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),l=(0,i.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=l},80813:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),l=(0,i.default)((0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),"Article");t.Z=l},27247:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),l=(0,i.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=l},98333:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),l=(0,i.default)((0,a.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");t.Z=l},67756:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),l=(0,i.default)((0,a.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"}),"PersonOutline");t.Z=l},91421:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),l=(0,i.default)([(0,a.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,a.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");t.Z=l},53329:function(e,t,n){var o=n(64836);t.Z=void 0;var i=o(n(45649)),a=n(80184),l=(0,i.default)((0,a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=l},79012:function(e,t,n){n.d(t,{Z:function(){return y}});var o=n(63366),i=n(87462),a=n(72791),l=n(63733),r=n(94419),s=n(66934),d=n(31402),u=n(75878),c=n(21217);function p(e){return(0,c.Z)("MuiFormGroup",e)}(0,u.Z)("MuiFormGroup",["root","row","error"]);var x=n(52930),f=n(76147),m=n(80184),h=["className","row"],v=(0,s.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.row&&t.row]}})((function(e){var t=e.ownerState;return(0,i.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})})),y=a.forwardRef((function(e,t){var n=(0,d.Z)({props:e,name:"MuiFormGroup"}),a=n.className,s=n.row,u=void 0!==s&&s,c=(0,o.Z)(n,h),y=(0,x.Z)(),g=(0,f.Z)({props:n,muiFormControl:y,states:["error"]}),b=(0,i.Z)({},n,{row:u,error:g.error}),w=function(e){var t=e.classes,n={root:["root",e.row&&"row",e.error&&"error"]};return(0,r.Z)(n,p,t)}(b);return(0,m.jsx)(v,(0,i.Z)({className:(0,l.Z)(w.root,a),ownerState:b,ref:t},c))}))},4378:function(e,t){t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);
//# sourceMappingURL=4334.bb1e41f3.chunk.js.map