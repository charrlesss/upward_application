"use strict";(self.webpackChunkupward=self.webpackChunkupward||[]).push([[1246],{61246:function(e,t,n){n.r(t),n.d(t,{chartAccountColumn:function(){return g},default:function(){return C},reducer:function(){return w}});var r=n(74165),i=n(15861),o=n(29439),u=n(4942),c=n(1413),l=n(72791),a=n(3380),s=n(91933),d=n(21830),f=n.n(d),h=n(64230),p=n(93433),v=n(80184);function x(e){var t=e.rows,n=e.column,r=e.width,i=e.height,u=e.dataReadOnly,c=e.onSelectionChange,a=e.isMultipleSelect,s=void 0!==a&&a,d=e.freeze,f=void 0!==d&&d,h=(0,l.useRef)(c),x=(0,l.useState)(n),m=(0,o.Z)(x,2),w=m[0],g=m[1],y=(0,l.useState)(null),C=(0,o.Z)(y,2),k=C[0],b=C[1],j=(0,l.useState)([]),A=(0,o.Z)(j,2),Z=A[0],S=A[1],L=(0,l.useState)(0),N=(0,o.Z)(L,2),R=N[0],D=N[1],B=(0,l.useState)([]),M=(0,o.Z)(B,2),T=M[0],V=M[1],z=function(e,t){t.preventDefault(),t.stopPropagation();var n=t.clientX,r=w[e].width,i=function(t){var i=r+(t.clientX-n),o=(0,p.Z)(w);o[e].width=i>50?i:50,g(o)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}))},E=function(e){b(e)},I=function(){b(null)},W=function(e){if(e.target.closest(".grid-container"))if("Enter"===e.key||"NumpadEnter"===e.key){e.preventDefault();var n=[],r=Z[Z.length-1];if(T.includes(r)&&!f){n=T.filter((function(e){return e!==r})),console.log(n),V(n);var i=t.filter((function(e,t){return n.includes(t)}));return void h.current(i)}n=s?[].concat((0,p.Z)(T),(0,p.Z)(Z)):[r],V(n);var o=t.filter((function(e,t){return n.includes(t)}));h.current(o)}else"ArrowDown"===e.key?(e.preventDefault(),S((function(e){var n;if(null===e[e.length-1])return[0];if(e[e.length-1]>=t.length-1)return[t.length-1];var r=e[e.length-1]+1,i=document.querySelector(".row-".concat(r));return null===i||void 0===i||null===(n=i.querySelector("input"))||void 0===n||n.focus(),null===i||void 0===i||i.scrollIntoView({block:"end",behavior:"smooth"}),[r]}))):"ArrowUp"===e.key&&(e.preventDefault(),S((function(e){var t;if(0===e[e.length-1])return[0];var n=e[e.length-1]-1,r=document.querySelector(".row-".concat(n));return null===r||void 0===r||r.scrollIntoView({block:"end",behavior:"smooth"}),null===r||void 0===r||null===(t=r.querySelector("input"))||void 0===t||t.focus(),[n]})))};return(0,l.useEffect)((function(){return window.addEventListener("keydown",W),function(){window.removeEventListener("keydown",W)}}),[t,Z,W]),(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,v.jsxs)("div",{className:"table-frame-color",children:[(0,v.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"".concat(r-10,"px        "),height:"".concat(i-135,"px")},className:"table-frame",children:(0,v.jsx)("div",{className:"table-panel",children:(0,v.jsxs)("div",{className:"grid-container",tabIndex:0,children:[(0,v.jsx)("div",{className:"grid-row grid-header",style:{position:"sticky",zIndex:"10",top:"-1px",background:"white"},children:w.map((function(e,t){return(0,v.jsxs)("div",{className:"grid-cell header-cell ".concat(k===t?"highlight-column":""),style:{width:e.width,height:"20px"},children:[(0,v.jsx)("input",{style:{fontWeight:"bold"},defaultValue:e.headerName,readOnly:!0,onChange:function(e){}}),(0,v.jsx)("div",{className:"resize-handle",onMouseDown:function(e){return z(t,e)},onMouseEnter:function(e){e.preventDefault(),E(t)},onMouseLeave:function(e){e.preventDefault(),I()}})]},t)}))}),t.map((function(e,n){return(0,v.jsx)("div",{className:"grid-row row-".concat(n),onClick:function(e){return function(e,n){if(s)if(n.shiftKey&&null!==R){for(var r=Math.min(R,e),i=Math.max(R,e),o=[],u=r;u<=i;u++)Z.includes(u)||o.push(u);var c=[].concat((0,p.Z)(T),o);V(c),S([].concat((0,p.Z)(Z),o)),V(c);var l=t.filter((function(e,t){return c.includes(t)}));h.current(l)}else if(n.ctrlKey||n.metaKey)if(Z.includes(e)&&!f){S(Z.filter((function(t){return t!==e}))),V((function(t){return t=t.filter((function(t){return t!==e})),t}));var a=T.filter((function(t){return t!==e}));V(a);var d=t.filter((function(e,t){return a.includes(t)}));h.current(d)}else{S([].concat((0,p.Z)(Z),[e])),V((function(t){return t.push(e),t}));var v=[].concat((0,p.Z)(T),[e]);V(v);var x=t.filter((function(e,t){return v.includes(t)}));h.current(x)}else S([e]);else S([e]);D(e)}(n,e)},onDoubleClick:function(e){return function(e,n){var r=[];if(!T.includes(e)||f){r=s?[].concat((0,p.Z)(T),[e]):[e],V(r);var i=t.filter((function(e,t){return r.includes(t)}));h.current(i)}else{r=T.filter((function(t){return t!==e})),console.log(r),V(r);var o=t.filter((function(e,t){return r.includes(t)}));h.current(o)}}(n)},children:w.map((function(t,r){return(0,v.jsxs)("div",{style:{width:t.width},className:"grid-cell ".concat(k===r?"highlight-column":""),children:[(0,v.jsx)("input",{value:e[t.field],onChange:function(e){},readOnly:u,className:"".concat(Z.includes(n)?"selected-row":""," ").concat(T.includes(n)?"selected-items":"")}),(0,v.jsx)("div",{className:"resize-handle",onMouseDown:function(e){e.preventDefault(),z(r,e)},onMouseEnter:function(e){e.preventDefault(),E(r)},onMouseLeave:function(e){e.preventDefault(),I()}})]},r)}))},n)}))]})})}),(0,v.jsxs)("div",{className:"table-panel-footer",children:["Records : ",t.length]})]})})}function m(e){var t=e.input,n=e.label,r=e.inputRef,i=(0,l.useId)();return(0,v.jsxs)("div",{style:{display:"flex",height:"18px",alignItems:"center"},children:[(0,v.jsx)("label",(0,c.Z)((0,c.Z)({},n),{},{htmlFor:i,children:n.title})),(0,v.jsx)("input",(0,c.Z)((0,c.Z)({ref:r,id:i},t),{},{style:(0,c.Z)({height:"18px"},t.style)}))]})}var w=function(e,t){return"UPDATE_FIELD"===t.type?(0,c.Z)((0,c.Z)({},e),{},(0,u.Z)({},t.field,t.value)):e},g=[{field:"Acct_Code",headerName:"Account Code",width:150},{field:"Acct_Title",headerName:"Account Name/Account Title",width:300},{field:"Short",headerName:"Short Name",width:300},{field:"Acct_Type",headerName:"Account Type",width:200},{field:"Account",headerName:"Account",width:100},{field:"SubAccnt",headerName:"Sub Account ?",width:100},{field:"IDNo",headerName:"I.D. ?",width:100},{field:"Inactive",headerName:"Inactive ?",width:100}],y="chart-account";function C(){var e,t,n,u,d=(0,l.useRef)(null),p=(0,l.useRef)(null),w=(0,l.useRef)(null),C=(0,l.useRef)(null),k=(0,l.useRef)(null),b=(0,l.useRef)(null),j=(0,l.useRef)(null),A=(0,l.useRef)(null),Z=(0,l.useRef)(null),S=(0,l.useContext)(a.V),L=S.myAxios,N=S.user,R=(0,l.useState)([]),D=(0,o.Z)(R,2),B=D[0],M=D[1],T=(0,l.useState)(""),V=(0,o.Z)(T,2),z=V[0],E=V[1],I=(0,s.useQuery)({queryKey:y,queryFn:function(){return(e=e||(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("/reference/get-chart-accounts?chartAccountSearch=".concat(null!==(t=null===(n=d.current)||void 0===n?void 0:n.value)&&void 0!==t?t:""),{headers:{Authorization:"Bearer ".concat(null===N||void 0===N?void 0:N.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:function(e){M(null===e||void 0===e?void 0:e.data.chartAccount),p.current&&(p.current.value=""),w.current&&(w.current.value=""),C.current&&(C.current.value=""),k.current&&(k.current.value=""),b.current&&(b.current.value=""),j.current&&(j.current.checked=!1),A.current&&(A.current.checked=!1),Z.current&&(Z.current.checked=!1)},refetchOnWindowFocus:!1}),W=I.isLoading,q=I.refetch,H=(0,s.useMutation)({mutationKey:y,mutationFn:function(e){return(t=t||(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.post("/reference/add-chart-account",t,{headers:{Authorization:"Bearer ".concat(null===N||void 0===N?void 0:N.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:X}),F=H.mutate,_=H.isLoading,K=(0,s.useMutation)({mutationKey:y,mutationFn:function(e){return(n=n||(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.post("/reference/update-chart-account",t,{headers:{Authorization:"Bearer ".concat(null===N||void 0===N?void 0:N.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:X}),O=K.mutate,U=K.isLoading,Y=(0,s.useMutation)({mutationKey:y,mutationFn:function(e){return(u=u||(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.post("/reference/delete-chart-account",t,{headers:{Authorization:"Bearer ".concat(null===N||void 0===N?void 0:N.accessToken)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},onSuccess:X}),G=Y.mutate,P=Y.isLoading;function X(e){if(e.data.success)return f().fire({position:"center",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1500}).then((function(){Q()}));f().fire({position:"center",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1500})}var Q=function(){E(""),p.current&&(p.current.value=""),w.current&&(w.current.value=""),C.current&&(C.current.value=""),k.current&&(k.current.value=""),b.current&&(b.current.value=""),j.current&&(j.current.checked=!1),A.current&&(A.current.checked=!1),Z.current&&(Z.current.checked=!1)},J=window.innerWidth-100,$=window.innerHeight-90,ee=""===z;return W||_||U||P?(0,v.jsx)("div",{children:"Loading..."}):(0,v.jsx)("div",{style:{flex:1,backgroundColor:"#F8F8FF"},children:(0,v.jsxs)("div",{style:{width:"".concat(J,"px"),height:"".concat($,"px"),margin:"auto"},children:[(0,v.jsxs)("div",{style:{height:"120px"},children:[(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",height:"30px",columnGap:"10px"},children:[(0,v.jsx)(m,{label:{title:"Search: ",style:{fontSize:"12px",fontWeight:"bold",width:"50px"}},input:{type:"search",onKeyDown:function(e){("Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),q()),"ArrowDown"===e.key)&&(e.preventDefault(),document.querySelector(".grid-container").focus())},style:{width:"500px"}},inputRef:d}),!ee&&(0,v.jsx)("button",{style:{margin:0,padding:"5px",borderRadius:"5px",background:"transparent"},onClick:Q,children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17px",height:"17px",viewBox:"0 0 24 24",fill:"none",children:(0,v.jsx)("path",{d:"M20.7457 3.32851C20.3552 2.93798 19.722 2.93798 19.3315 3.32851L12.0371 10.6229L4.74275 3.32851C4.35223 2.93798 3.71906 2.93798 3.32854 3.32851C2.93801 3.71903 2.93801 4.3522 3.32854 4.74272L10.6229 12.0371L3.32856 19.3314C2.93803 19.722 2.93803 20.3551 3.32856 20.7457C3.71908 21.1362 4.35225 21.1362 4.74277 20.7457L12.0371 13.4513L19.3315 20.7457C19.722 21.1362 20.3552 21.1362 20.7457 20.7457C21.1362 20.3551 21.1362 19.722 20.7457 19.3315L13.4513 12.0371L20.7457 4.74272C21.1362 4.3522 21.1362 3.71903 20.7457 3.32851Z",fill:"#d97706"})})}),ee&&(0,v.jsx)("button",{style:{margin:0,padding:"5px",borderRadius:"5px",background:"transparent"},onClick:function(){E("add")},children:(0,v.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",children:[(0,v.jsx)("title",{}),(0,v.jsx)("g",{id:"Complete",children:(0,v.jsx)("g",{"data-name":"add",id:"add-2",children:(0,v.jsxs)("g",{children:[(0,v.jsx)("line",{fill:"none",stroke:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"12",x2:"12",y1:"19",y2:"5"}),(0,v.jsx)("line",{fill:"none",stroke:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"5",x2:"19",y1:"12",y2:"12"})]})})})]})}),(0,v.jsx)("button",{style:{margin:0,padding:"5px",borderRadius:"5px",background:"transparent"},onClick:function(e){var t,n,r,i,o,u,l,a,s,d,v,x,m,g;if(""===(null===(t=p.current)||void 0===t?void 0:t.value))return f().fire({position:"center",icon:"warning",title:"Acct Code is required!",showConfirmButton:!1,timer:1500});if(""===(null===(n=k.current)||void 0===n?void 0:n.value))return f().fire({position:"center",icon:"warning",title:"Acct Title is required!",showConfirmButton:!1,timer:1500});if(""===(null===(r=b.current)||void 0===r?void 0:r.value))return f().fire({position:"center",icon:"warning",title:"Short Name is required!",showConfirmButton:!1,timer:1500});if((null===(i=p.current)||void 0===i?void 0:i.value).length>=200)return f().fire({position:"center",icon:"warning",title:"Acct Code is too long!",showConfirmButton:!1,timer:1500});if((null===(o=k.current)||void 0===o?void 0:o.value).length>=200)return f().fire({position:"center",icon:"warning",title:"Acct Title is too long!",showConfirmButton:!1,timer:1500});if((null===(u=b.current)||void 0===u?void 0:u.value).length>=200)return f().fire({position:"center",icon:"warning",title:"Short Name is too long!",showConfirmButton:!1,timer:1500});e.preventDefault();var y={Acct_Code:null===(l=p.current)||void 0===l?void 0:l.value,Acct_Title:null===(a=k.current)||void 0===a?void 0:a.value,Short:null===(s=b.current)||void 0===s?void 0:s.value,Account:null===(d=w.current)||void 0===d?void 0:d.value,Acct_Type:null===(v=C.current)||void 0===v?void 0:v.value,IDNo:null===(x=A.current)||void 0===x?void 0:x.checked,SubAccnt:null===(m=j.current)||void 0===m?void 0:m.checked,Inactive:null===(g=Z.current)||void 0===g?void 0:g.checked,mode:"",search:""};"update"===z?(0,h.s)({isUpdate:!0,cb:function(e){O((0,c.Z)((0,c.Z)({},y),{},{userCodeConfirmation:e}))}}):(0,h.L)({isConfirm:function(){F(y)}})},disabled:ee,children:(0,v.jsx)("svg",{width:"17px",height:"17px",viewBox:"0 0 24 24",fill:"green",children:(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1716 1C18.702 1 19.2107 1.21071 19.5858 1.58579L22.4142 4.41421C22.7893 4.78929 23 5.29799 23 5.82843V20C23 21.6569 21.6569 23 20 23H4C2.34315 23 1 21.6569 1 20V4C1 2.34315 2.34315 1 4 1H18.1716ZM4 3C3.44772 3 3 3.44772 3 4V20C3 20.5523 3.44772 21 4 21L5 21L5 15C5 13.3431 6.34315 12 8 12L16 12C17.6569 12 19 13.3431 19 15V21H20C20.5523 21 21 20.5523 21 20V6.82843C21 6.29799 20.7893 5.78929 20.4142 5.41421L18.5858 3.58579C18.2107 3.21071 17.702 3 17.1716 3H17V5C17 6.65685 15.6569 8 14 8H10C8.34315 8 7 6.65685 7 5V3H4ZM17 21V15C17 14.4477 16.5523 14 16 14L8 14C7.44772 14 7 14.4477 7 15L7 21L17 21ZM9 3H15V5C15 5.55228 14.5523 6 14 6H10C9.44772 6 9 5.55228 9 5V3Z",fill:"green"})})}),(0,v.jsx)("button",{style:{margin:0,padding:"5px",borderRadius:"5px",background:"transparent"},onClick:function(){(0,h.s)({isUpdate:!1,cb:function(e){var t;G({Acct_Code:null===(t=p.current)||void 0===t?void 0:t.value,userCodeConfirmation:e})}})},disabled:"update"!==z,children:(0,v.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",children:[(0,v.jsx)("path",{d:"M4 7H20",stroke:"red",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,v.jsx)("path",{d:"M6 7V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V7",stroke:"red",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,v.jsx)("path",{d:"M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z",stroke:"red",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),(0,v.jsxs)("div",{style:{marginTop:"10px",display:"flex",columnGap:"30px",rowGap:"15px",flexWrap:"wrap"},children:[(0,v.jsx)(m,{label:{title:"Code: ",style:{fontSize:"12px",fontWeight:"bold",width:"40px"}},input:{disabled:ee,type:"text",style:{width:"90px"}},inputRef:p}),(0,v.jsx)(m,{label:{title:"Account Classification: ",style:{fontSize:"12px",fontWeight:"bold",width:"135px"}},input:{disabled:ee,type:"text",style:{width:"120px"}},inputRef:w}),(0,v.jsx)(m,{label:{title:"Account Type: ",style:{fontSize:"12px",fontWeight:"bold",width:"90px"}},input:{disabled:ee,type:"text",style:{width:"100px"}},inputRef:C}),(0,v.jsx)(m,{label:{title:"Name/Title: ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:ee,type:"text",style:{width:"350px"}},inputRef:k}),(0,v.jsx)(m,{label:{title:"ShortName: ",style:{fontSize:"12px",fontWeight:"bold",width:"80px"}},input:{disabled:ee,type:"text",style:{width:"200px"}},inputRef:b}),(0,v.jsx)(m,{label:{title:"Required sub-account?: ",style:{fontSize:"12px",fontWeight:"bold",width:"140px"}},input:{disabled:ee,type:"checkbox",style:{width:"12px",height:"12px"}},inputRef:j}),(0,v.jsx)(m,{label:{title:"Required I.D.?: ",style:{fontSize:"12px",fontWeight:"bold",width:"85px"}},input:{disabled:ee,type:"checkbox",style:{width:"12px",height:"12px"}},inputRef:A}),(0,v.jsx)(m,{label:{title:"Mark As Inactive: ",style:{fontSize:"12px",fontWeight:"bold",width:"100px"}},input:{disabled:ee,type:"checkbox",style:{width:"12px",height:"12px"}},inputRef:Z})]})]}),(0,v.jsx)(x,{rows:B,column:g,width:J,height:$,dataReadOnly:!0,onSelectionChange:function(e){if(e.length>0){var t=e[0];p.current&&(p.current.value=t.Acct_Code),w.current&&(w.current.value=t.Account),C.current&&(C.current.value=t.Acct_Type),k.current&&(k.current.value=t.Acct_Title),b.current&&(b.current.value=t.Short),j.current&&(j.current.checked="YES"===t.SubAccnt),A.current&&(A.current.checked="YES"===t.IDNo),Z.current&&(Z.current.checked="YES"===t.Inactive),E("update")}else Q()}})]})})}},64230:function(e,t,n){n.d(t,{L:function(){return l},s:function(){return c}});var r=n(74165),i=n(15861),o=n(21830),u=n.n(o);function c(e){var t;u().fire({title:"Are you sure!",html:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:e.isUpdate?"Are you sure you want to make this change?":"Are you sure you want to delete this?",icon:"warning",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Save",confirmButtonColor:"green",showLoaderOnConfirm:!0,preConfirm:function(n){return(t=t||(0,i.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.cb(n)}catch(r){u().showValidationMessage("\n            Request failed: ".concat(r,"\n          "))}case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},allowOutsideClick:function(){return!u().isLoading()}}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}function l(e){u().fire({title:"Are you sure?",text:null!==e&&void 0!==e&&e.text?null===e||void 0===e?void 0:e.text:"Do you want to proceed with saving?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, save it!"}).then((function(t){if(t.isConfirmed&&e.isConfirm)return e.isConfirm();e.isDeclined&&e.isDeclined()}))}}}]);
//# sourceMappingURL=1246.0b5c98d3.chunk.js.map